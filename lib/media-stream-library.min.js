var mediaStreamLibrary=(()=>{var ga=Object.create;var Rt=Object.defineProperty,ya=Object.defineProperties,ba=Object.getOwnPropertyDescriptor,xa=Object.getOwnPropertyDescriptors,_a=Object.getOwnPropertyNames,ci=Object.getOwnPropertySymbols,wa=Object.getPrototypeOf,di=Object.prototype.hasOwnProperty,va=Object.prototype.propertyIsEnumerable;var I=Math.pow,li=(r,e,t)=>e in r?Rt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,X=(r,e)=>{for(var t in e||(e={}))di.call(e,t)&&li(r,t,e[t]);if(ci)for(var t of ci(e))va.call(e,t)&&li(r,t,e[t]);return r},we=(r,e)=>ya(r,xa(e));var Ea=(r,e)=>()=>(r&&(e=r(r=0)),e);var S=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Dt=(r,e)=>{for(var t in e)Rt(r,t,{get:e[t],enumerable:!0})},pi=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of _a(e))!di.call(r,i)&&i!==t&&Rt(r,i,{get:()=>e[i],enumerable:!(n=ba(e,i))||n.enumerable});return r};var C=(r,e,t)=>(t=r!=null?ga(wa(r)):{},pi(e||!r||!r.__esModule?Rt(t,"default",{value:r,enumerable:!0}):t,r)),Sa=r=>pi(Rt({},"__esModule",{value:!0}),r);var J=(r,e,t)=>new Promise((n,i)=>{var o=u=>{try{a(t.next(u))}catch(f){i(f)}},s=u=>{try{a(t.throw(u))}catch(f){i(f)}},a=u=>u.done?n(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(r,e)).next())});var gi=S(Nt=>{"use strict";c();Nt.byteLength=Ta;Nt.toByteArray=Ba;Nt.fromByteArray=Ia;var se=[],Q=[],Ra=typeof Uint8Array!="undefined"?Uint8Array:Array,Xr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Ue=0,hi=Xr.length;Ue<hi;++Ue)se[Ue]=Xr[Ue],Q[Xr.charCodeAt(Ue)]=Ue;var Ue,hi;Q["-".charCodeAt(0)]=62;Q["_".charCodeAt(0)]=63;function mi(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function Ta(r){var e=mi(r),t=e[0],n=e[1];return(t+n)*3/4-n}function Ca(r,e,t){return(e+t)*3/4-t}function Ba(r){var e,t=mi(r),n=t[0],i=t[1],o=new Ra(Ca(r,n,i)),s=0,a=i>0?n-4:n,u;for(u=0;u<a;u+=4)e=Q[r.charCodeAt(u)]<<18|Q[r.charCodeAt(u+1)]<<12|Q[r.charCodeAt(u+2)]<<6|Q[r.charCodeAt(u+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=Q[r.charCodeAt(u)]<<2|Q[r.charCodeAt(u+1)]>>4,o[s++]=e&255),i===1&&(e=Q[r.charCodeAt(u)]<<10|Q[r.charCodeAt(u+1)]<<4|Q[r.charCodeAt(u+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function Ma(r){return se[r>>18&63]+se[r>>12&63]+se[r>>6&63]+se[r&63]}function La(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),i.push(Ma(n));return i.join("")}function Ia(r){for(var e,t=r.length,n=t%3,i=[],o=16383,s=0,a=t-n;s<a;s+=o)i.push(La(r,s,s+o>a?a:s+o));return n===1?(e=r[t-1],i.push(se[e>>2]+se[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(se[e>>10]+se[e>>4&63]+se[e<<2&63]+"=")),i.join("")}});var yi=S(Jr=>{c();Jr.read=function(r,e,t,n,i){var o,s,a=i*8-n-1,u=(1<<a)-1,f=u>>1,l=-7,d=t?i-1:0,h=t?-1:1,m=r[e+d];for(d+=h,o=m&(1<<-l)-1,m>>=-l,l+=a;l>0;o=o*256+r[e+d],d+=h,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=s*256+r[e+d],d+=h,l-=8);if(o===0)o=1-f;else{if(o===u)return s?NaN:(m?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-f}return(m?-1:1)*s*Math.pow(2,o-n)};Jr.write=function(r,e,t,n,i,o){var s,a,u,f=o*8-i-1,l=(1<<f)-1,d=l>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:o-1,x=n?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),s+d>=1?e+=h/u:e+=h*Math.pow(2,1-d),e*u>=2&&(s++,u/=2),s+d>=l?(a=0,s=l):s+d>=1?(a=(e*u-1)*Math.pow(2,i),s=s+d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;r[t+m]=a&255,m+=x,a/=256,i-=8);for(s=s<<i|a,f+=i;f>0;r[t+m]=s&255,m+=x,s/=256,f-=8);r[t+m-x]|=y*128}});var et=S(Ze=>{"use strict";c();var Qr=gi(),Je=yi(),bi=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Ze.Buffer=p;Ze.SlowBuffer=Ua;Ze.INSPECT_MAX_BYTES=50;var Ht=2147483647;Ze.kMaxLength=Ht;p.TYPED_ARRAY_SUPPORT=Aa();!p.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Aa(){try{let r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch(r){return!1}}Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(!!p.isBuffer(this))return this.buffer}});Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(!!p.isBuffer(this))return this.byteOffset}});function me(r){if(r>Ht)throw new RangeError('The value "'+r+'" is invalid for option "size"');let e=new Uint8Array(r);return Object.setPrototypeOf(e,p.prototype),e}function p(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return rn(r)}return vi(r,e,t)}p.poolSize=8192;function vi(r,e,t){if(typeof r=="string")return Pa(r,e);if(ArrayBuffer.isView(r))return ka(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(ae(r,ArrayBuffer)||r&&ae(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(ae(r,SharedArrayBuffer)||r&&ae(r.buffer,SharedArrayBuffer)))return en(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return p.from(n,e,t);let i=Oa(r);if(i)return i;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return p.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}p.from=function(r,e,t){return vi(r,e,t)};Object.setPrototypeOf(p.prototype,Uint8Array.prototype);Object.setPrototypeOf(p,Uint8Array);function Ei(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function Fa(r,e,t){return Ei(r),r<=0?me(r):e!==void 0?typeof t=="string"?me(r).fill(e,t):me(r).fill(e):me(r)}p.alloc=function(r,e,t){return Fa(r,e,t)};function rn(r){return Ei(r),me(r<0?0:nn(r)|0)}p.allocUnsafe=function(r){return rn(r)};p.allocUnsafeSlow=function(r){return rn(r)};function Pa(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!p.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=Si(r,e)|0,n=me(t),i=n.write(r,e);return i!==t&&(n=n.slice(0,i)),n}function Zr(r){let e=r.length<0?0:nn(r.length)|0,t=me(e);for(let n=0;n<e;n+=1)t[n]=r[n]&255;return t}function ka(r){if(ae(r,Uint8Array)){let e=new Uint8Array(r);return en(e.buffer,e.byteOffset,e.byteLength)}return Zr(r)}function en(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,p.prototype),n}function Oa(r){if(p.isBuffer(r)){let e=nn(r.length)|0,t=me(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||sn(r.length)?me(0):Zr(r);if(r.type==="Buffer"&&Array.isArray(r.data))return Zr(r.data)}function nn(r){if(r>=Ht)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Ht.toString(16)+" bytes");return r|0}function Ua(r){return+r!=r&&(r=0),p.alloc(+r)}p.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==p.prototype};p.compare=function(e,t){if(ae(e,Uint8Array)&&(e=p.from(e,e.offset,e.byteLength)),ae(t,Uint8Array)&&(t=p.from(t,t.offset,t.byteLength)),!p.isBuffer(e)||!p.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0};p.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};p.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return p.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let i=p.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){let s=e[n];if(ae(s,Uint8Array))o+s.length>i.length?(p.isBuffer(s)||(s=p.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(p.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function Si(r,e){if(p.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||ae(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return tn(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return Fi(r).length;default:if(i)return n?-1:tn(r).length;e=(""+e).toLowerCase(),i=!0}}p.byteLength=Si;function Da(r,e,t){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return Ya(this,e,t);case"utf8":case"utf-8":return Ti(this,e,t);case"ascii":return Va(this,e,t);case"latin1":case"binary":return za(this,e,t);case"base64":return $a(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ka(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}p.prototype._isBuffer=!0;function De(r,e,t){let n=r[e];r[e]=r[t],r[t]=n}p.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)De(this,t,t+1);return this};p.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)De(this,t,t+3),De(this,t+1,t+2);return this};p.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)De(this,t,t+7),De(this,t+1,t+6),De(this,t+2,t+5),De(this,t+3,t+4);return this};p.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?Ti(this,0,e):Da.apply(this,arguments)};p.prototype.toLocaleString=p.prototype.toString;p.prototype.equals=function(e){if(!p.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:p.compare(this,e)===0};p.prototype.inspect=function(){let e="",t=Ze.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};bi&&(p.prototype[bi]=p.prototype.inspect);p.prototype.compare=function(e,t,n,i,o){if(ae(e,Uint8Array)&&(e=p.from(e,e.offset,e.byteLength)),!p.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;let s=o-i,a=n-t,u=Math.min(s,a),f=this.slice(i,o),l=e.slice(t,n);for(let d=0;d<u;++d)if(f[d]!==l[d]){s=f[d],a=l[d];break}return s<a?-1:a<s?1:0};function Ri(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,sn(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=p.from(e,n)),p.isBuffer(e))return e.length===0?-1:xi(r,e,t,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):xi(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function xi(r,e,t,n,i){let o=1,s=r.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,s/=2,a/=2,t/=2}function u(l,d){return o===1?l[d]:l.readUInt16BE(d*o)}let f;if(i){let l=-1;for(f=t;f<s;f++)if(u(r,f)===u(e,l===-1?0:f-l)){if(l===-1&&(l=f),f-l+1===a)return l*o}else l!==-1&&(f-=f-l),l=-1}else for(t+a>s&&(t=s-a),f=t;f>=0;f--){let l=!0;for(let d=0;d<a;d++)if(u(r,f+d)!==u(e,d)){l=!1;break}if(l)return f}return-1}p.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};p.prototype.indexOf=function(e,t,n){return Ri(this,e,t,n,!0)};p.prototype.lastIndexOf=function(e,t,n){return Ri(this,e,t,n,!1)};function Na(r,e,t,n){t=Number(t)||0;let i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;let o=e.length;n>o/2&&(n=o/2);let s;for(s=0;s<n;++s){let a=parseInt(e.substr(s*2,2),16);if(sn(a))return s;r[t+s]=a}return s}function Ha(r,e,t,n){return qt(tn(e,r.length-t),r,t,n)}function qa(r,e,t,n){return qt(Za(e),r,t,n)}function ja(r,e,t,n){return qt(Fi(e),r,t,n)}function Wa(r,e,t,n){return qt(eu(e,r.length-t),r,t,n)}p.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-t;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return Na(this,e,t,n);case"utf8":case"utf-8":return Ha(this,e,t,n);case"ascii":case"latin1":case"binary":return qa(this,e,t,n);case"base64":return ja(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Wa(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function $a(r,e,t){return e===0&&t===r.length?Qr.fromByteArray(r):Qr.fromByteArray(r.slice(e,t))}function Ti(r,e,t){t=Math.min(r.length,t);let n=[],i=e;for(;i<t;){let o=r[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=t){let u,f,l,d;switch(a){case 1:o<128&&(s=o);break;case 2:u=r[i+1],(u&192)===128&&(d=(o&31)<<6|u&63,d>127&&(s=d));break;case 3:u=r[i+1],f=r[i+2],(u&192)===128&&(f&192)===128&&(d=(o&15)<<12|(u&63)<<6|f&63,d>2047&&(d<55296||d>57343)&&(s=d));break;case 4:u=r[i+1],f=r[i+2],l=r[i+3],(u&192)===128&&(f&192)===128&&(l&192)===128&&(d=(o&15)<<18|(u&63)<<12|(f&63)<<6|l&63,d>65535&&d<1114112&&(s=d))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=a}return Ga(n)}var _i=4096;function Ga(r){let e=r.length;if(e<=_i)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=_i));return t}function Va(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function za(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function Ya(r,e,t){let n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);let i="";for(let o=e;o<t;++o)i+=tu[r[o]];return i}function Ka(r,e,t){let n=r.slice(e,t),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}p.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,p.prototype),i};function N(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}p.prototype.readUintLE=p.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||N(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return i};p.prototype.readUintBE=p.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||N(e,t,this.length);let i=this[e+--t],o=1;for(;t>0&&(o*=256);)i+=this[e+--t]*o;return i};p.prototype.readUint8=p.prototype.readUInt8=function(e,t){return e=e>>>0,t||N(e,1,this.length),this[e]};p.prototype.readUint16LE=p.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||N(e,2,this.length),this[e]|this[e+1]<<8};p.prototype.readUint16BE=p.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||N(e,2,this.length),this[e]<<8|this[e+1]};p.prototype.readUint32LE=p.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};p.prototype.readUint32BE=p.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||N(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};p.prototype.readBigUInt64LE=ve(function(e){e=e>>>0,Qe(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Tt(e,this.length-8);let i=t+this[++e]*I(2,8)+this[++e]*I(2,16)+this[++e]*I(2,24),o=this[++e]+this[++e]*I(2,8)+this[++e]*I(2,16)+n*I(2,24);return BigInt(i)+(BigInt(o)<<BigInt(32))});p.prototype.readBigUInt64BE=ve(function(e){e=e>>>0,Qe(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Tt(e,this.length-8);let i=t*I(2,24)+this[++e]*I(2,16)+this[++e]*I(2,8)+this[++e],o=this[++e]*I(2,24)+this[++e]*I(2,16)+this[++e]*I(2,8)+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});p.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||N(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};p.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||N(e,t,this.length);let i=t,o=1,s=this[e+--i];for(;i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*t)),s};p.prototype.readInt8=function(e,t){return e=e>>>0,t||N(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};p.prototype.readInt16LE=function(e,t){e=e>>>0,t||N(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};p.prototype.readInt16BE=function(e,t){e=e>>>0,t||N(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};p.prototype.readInt32LE=function(e,t){return e=e>>>0,t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};p.prototype.readInt32BE=function(e,t){return e=e>>>0,t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};p.prototype.readBigInt64LE=ve(function(e){e=e>>>0,Qe(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Tt(e,this.length-8);let i=this[e+4]+this[e+5]*I(2,8)+this[e+6]*I(2,16)+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+this[++e]*I(2,8)+this[++e]*I(2,16)+this[++e]*I(2,24))});p.prototype.readBigInt64BE=ve(function(e){e=e>>>0,Qe(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Tt(e,this.length-8);let i=(t<<24)+this[++e]*I(2,16)+this[++e]*I(2,8)+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*I(2,24)+this[++e]*I(2,16)+this[++e]*I(2,8)+n)});p.prototype.readFloatLE=function(e,t){return e=e>>>0,t||N(e,4,this.length),Je.read(this,e,!0,23,4)};p.prototype.readFloatBE=function(e,t){return e=e>>>0,t||N(e,4,this.length),Je.read(this,e,!1,23,4)};p.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||N(e,8,this.length),Je.read(this,e,!0,52,8)};p.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||N(e,8,this.length),Je.read(this,e,!1,52,8)};function $(r,e,t,n,i,o){if(!p.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}p.prototype.writeUintLE=p.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;$(this,e,t,n,a,0)}let o=1,s=0;for(this[t]=e&255;++s<n&&(o*=256);)this[t+s]=e/o&255;return t+n};p.prototype.writeUintBE=p.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;$(this,e,t,n,a,0)}let o=n-1,s=1;for(this[t+o]=e&255;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+n};p.prototype.writeUint8=p.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||$(this,e,t,1,255,0),this[t]=e&255,t+1};p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||$(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||$(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||$(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||$(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function Ci(r,e,t,n,i){Ai(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,t}function Bi(r,e,t,n,i){Ai(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t+7]=o,o=o>>8,r[t+6]=o,o=o>>8,r[t+5]=o,o=o>>8,r[t+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=s,s=s>>8,r[t+2]=s,s=s>>8,r[t+1]=s,s=s>>8,r[t]=s,t+8}p.prototype.writeBigUInt64LE=ve(function(e,t=0){return Ci(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});p.prototype.writeBigUInt64BE=ve(function(e,t=0){return Bi(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});p.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let u=Math.pow(2,8*n-1);$(this,e,t,n,u-1,-u)}let o=0,s=1,a=0;for(this[t]=e&255;++o<n&&(s*=256);)e<0&&a===0&&this[t+o-1]!==0&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n};p.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let u=Math.pow(2,8*n-1);$(this,e,t,n,u-1,-u)}let o=n-1,s=1,a=0;for(this[t+o]=e&255;--o>=0&&(s*=256);)e<0&&a===0&&this[t+o+1]!==0&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n};p.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||$(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};p.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||$(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};p.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||$(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};p.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||$(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};p.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||$(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};p.prototype.writeBigInt64LE=ve(function(e,t=0){return Ci(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});p.prototype.writeBigInt64BE=ve(function(e,t=0){return Bi(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Mi(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function Li(r,e,t,n,i){return e=+e,t=t>>>0,i||Mi(r,e,t,4,34028234663852886e22,-34028234663852886e22),Je.write(r,e,t,n,23,4),t+4}p.prototype.writeFloatLE=function(e,t,n){return Li(this,e,t,!0,n)};p.prototype.writeFloatBE=function(e,t,n){return Li(this,e,t,!1,n)};function Ii(r,e,t,n,i){return e=+e,t=t>>>0,i||Mi(r,e,t,8,17976931348623157e292,-17976931348623157e292),Je.write(r,e,t,n,52,8),t+8}p.prototype.writeDoubleLE=function(e,t,n){return Ii(this,e,t,!0,n)};p.prototype.writeDoubleBE=function(e,t,n){return Ii(this,e,t,!1,n)};p.prototype.copy=function(e,t,n,i){if(!p.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);let o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),o};p.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!p.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{let s=p.isBuffer(e)?e:p.from(e,i),a=s.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var Xe={};function on(r,e,t){Xe[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}on("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);on("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError);on("ERR_OUT_OF_RANGE",function(r,e,t){let n=`The value of "${r}" is out of range.`,i=t;return Number.isInteger(t)&&Math.abs(t)>I(2,32)?i=wi(String(t)):typeof t=="bigint"&&(i=String(t),(t>I(BigInt(2),BigInt(32))||t<-I(BigInt(2),BigInt(32)))&&(i=wi(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function wi(r){let e="",t=r.length,n=r[0]==="-"?1:0;for(;t>=n+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function Xa(r,e,t){Qe(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&Tt(e,r.length-(t+1))}function Ai(r,e,t,n,i,o){if(r>t||r<e){let s=typeof e=="bigint"?"n":"",a;throw o>3?e===0||e===BigInt(0)?a=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:a=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:a=`>= ${e}${s} and <= ${t}${s}`,new Xe.ERR_OUT_OF_RANGE("value",a,r)}Xa(n,i,o)}function Qe(r,e){if(typeof r!="number")throw new Xe.ERR_INVALID_ARG_TYPE(e,"number",r)}function Tt(r,e,t){throw Math.floor(r)!==r?(Qe(r,t),new Xe.ERR_OUT_OF_RANGE(t||"offset","an integer",r)):e<0?new Xe.ERR_BUFFER_OUT_OF_BOUNDS:new Xe.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,r)}var Ja=/[^+/0-9A-Za-z-_]/g;function Qa(r){if(r=r.split("=")[0],r=r.trim().replace(Ja,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function tn(r,e){e=e||1/0;let t,n=r.length,i=null,o=[];for(let s=0;s<n;++s){if(t=r.charCodeAt(s),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function Za(r){let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function eu(r,e){let t,n,i,o=[];for(let s=0;s<r.length&&!((e-=2)<0);++s)t=r.charCodeAt(s),n=t>>8,i=t%256,o.push(i),o.push(n);return o}function Fi(r){return Qr.toByteArray(Qa(r))}function qt(r,e,t,n){let i;for(i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function ae(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function sn(r){return r!==r}var tu=function(){let r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let n=t*16;for(let i=0;i<16;++i)e[n+i]=r[t]+r[i]}return e}();function ve(r){return typeof BigInt=="undefined"?ru:r}function ru(){throw new Error("BigInt not supported")}});var Di=S((xl,Ui)=>{c();var k=Ui.exports={},ue,fe;function an(){throw new Error("setTimeout has not been defined")}function un(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?ue=setTimeout:ue=an}catch(r){ue=an}try{typeof clearTimeout=="function"?fe=clearTimeout:fe=un}catch(r){fe=un}})();function Pi(r){if(ue===setTimeout)return setTimeout(r,0);if((ue===an||!ue)&&setTimeout)return ue=setTimeout,setTimeout(r,0);try{return ue(r,0)}catch(e){try{return ue.call(null,r,0)}catch(t){return ue.call(this,r,0)}}}function nu(r){if(fe===clearTimeout)return clearTimeout(r);if((fe===un||!fe)&&clearTimeout)return fe=clearTimeout,clearTimeout(r);try{return fe(r)}catch(e){try{return fe.call(null,r)}catch(t){return fe.call(this,r)}}}var ge=[],tt=!1,Ne,jt=-1;function iu(){!tt||!Ne||(tt=!1,Ne.length?ge=Ne.concat(ge):jt=-1,ge.length&&ki())}function ki(){if(!tt){var r=Pi(iu);tt=!0;for(var e=ge.length;e;){for(Ne=ge,ge=[];++jt<e;)Ne&&Ne[jt].run();jt=-1,e=ge.length}Ne=null,tt=!1,nu(r)}}k.nextTick=function(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];ge.push(new Oi(r,e)),ge.length===1&&!tt&&Pi(ki)};function Oi(r,e){this.fun=r,this.array=e}Oi.prototype.run=function(){this.fun.apply(null,this.array)};k.title="browser";k.browser=!0;k.env={};k.argv=[];k.version="";k.versions={};function ye(){}k.on=ye;k.addListener=ye;k.once=ye;k.off=ye;k.removeListener=ye;k.removeAllListeners=ye;k.emit=ye;k.prependListener=ye;k.prependOnceListener=ye;k.listeners=function(r){return[]};k.binding=function(r){throw new Error("process.binding is not supported")};k.cwd=function(){return"/"};k.chdir=function(r){throw new Error("process.chdir is not supported")};k.umask=function(){return 0}});var Ni,ou,c=Ea(()=>{Ni=C(et()),ou=C(Di());window.Buffer=Ni.Buffer;window.process=ou});var Ki=S((_l,fn)=>{"use strict";c();var rt=typeof Reflect=="object"?Reflect:null,Hi=rt&&typeof rt.apply=="function"?rt.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},Wt;rt&&typeof rt.ownKeys=="function"?Wt=rt.ownKeys:Object.getOwnPropertySymbols?Wt=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Wt=function(e){return Object.getOwnPropertyNames(e)};function su(r){console&&console.warn&&console.warn(r)}var ji=Number.isNaN||function(e){return e!==e};function B(){B.init.call(this)}fn.exports=B;fn.exports.once=cu;B.EventEmitter=B;B.prototype._events=void 0;B.prototype._eventsCount=0;B.prototype._maxListeners=void 0;var qi=10;function $t(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(B,"defaultMaxListeners",{enumerable:!0,get:function(){return qi},set:function(r){if(typeof r!="number"||r<0||ji(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");qi=r}});B.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};B.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||ji(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Wi(r){return r._maxListeners===void 0?B.defaultMaxListeners:r._maxListeners}B.prototype.getMaxListeners=function(){return Wi(this)};B.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=o[e];if(u===void 0)return!1;if(typeof u=="function")Hi(u,this,t);else for(var f=u.length,l=Yi(u,f),n=0;n<f;++n)Hi(l[n],this,t);return!0};function $i(r,e,t,n){var i,o,s;if($t(t),o=r._events,o===void 0?(o=r._events=Object.create(null),r._eventsCount=0):(o.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),s=o[e]),s===void 0)s=o[e]=t,++r._eventsCount;else if(typeof s=="function"?s=o[e]=n?[t,s]:[s,t]:n?s.unshift(t):s.push(t),i=Wi(r),i>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=r,a.type=e,a.count=s.length,su(a)}return r}B.prototype.addListener=function(e,t){return $i(this,e,t,!1)};B.prototype.on=B.prototype.addListener;B.prototype.prependListener=function(e,t){return $i(this,e,t,!0)};function au(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Gi(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=au.bind(n);return i.listener=t,n.wrapFn=i,i}B.prototype.once=function(e,t){return $t(t),this.on(e,Gi(this,e,t)),this};B.prototype.prependOnceListener=function(e,t){return $t(t),this.prependListener(e,Gi(this,e,t)),this};B.prototype.removeListener=function(e,t){var n,i,o,s,a;if($t(t),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){a=n[s].listener,o=s;break}if(o<0)return this;o===0?n.shift():uu(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this};B.prototype.off=B.prototype.removeListener;B.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function Vi(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?fu(i):Yi(i,i.length)}B.prototype.listeners=function(e){return Vi(this,e,!0)};B.prototype.rawListeners=function(e){return Vi(this,e,!1)};B.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):zi.call(r,e)};B.prototype.listenerCount=zi;function zi(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}B.prototype.eventNames=function(){return this._eventsCount>0?Wt(this._events):[]};function Yi(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function uu(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function fu(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function cu(r,e){return new Promise(function(t,n){function i(){o!==void 0&&r.removeListener("error",o),t([].slice.call(arguments))}var o;e!=="error"&&(o=function(a){r.removeListener(e,i),n(a)},r.once("error",o)),r.once(e,i)})}});var He=S((wl,cn)=>{c();typeof Object.create=="function"?cn.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:cn.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}});var dn=S((vl,ln)=>{"use strict";c();var nt=typeof Reflect=="object"?Reflect:null,Xi=nt&&typeof nt.apply=="function"?nt.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},Gt;nt&&typeof nt.ownKeys=="function"?Gt=nt.ownKeys:Object.getOwnPropertySymbols?Gt=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Gt=function(e){return Object.getOwnPropertyNames(e)};function lu(r){console&&console.warn&&console.warn(r)}var Qi=Number.isNaN||function(e){return e!==e};function M(){M.init.call(this)}ln.exports=M;ln.exports.once=mu;M.EventEmitter=M;M.prototype._events=void 0;M.prototype._eventsCount=0;M.prototype._maxListeners=void 0;var Ji=10;function Vt(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(M,"defaultMaxListeners",{enumerable:!0,get:function(){return Ji},set:function(r){if(typeof r!="number"||r<0||Qi(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");Ji=r}});M.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};M.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Qi(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Zi(r){return r._maxListeners===void 0?M.defaultMaxListeners:r._maxListeners}M.prototype.getMaxListeners=function(){return Zi(this)};M.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=o[e];if(u===void 0)return!1;if(typeof u=="function")Xi(u,this,t);else for(var f=u.length,l=io(u,f),n=0;n<f;++n)Xi(l[n],this,t);return!0};function eo(r,e,t,n){var i,o,s;if(Vt(t),o=r._events,o===void 0?(o=r._events=Object.create(null),r._eventsCount=0):(o.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),s=o[e]),s===void 0)s=o[e]=t,++r._eventsCount;else if(typeof s=="function"?s=o[e]=n?[t,s]:[s,t]:n?s.unshift(t):s.push(t),i=Zi(r),i>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=r,a.type=e,a.count=s.length,lu(a)}return r}M.prototype.addListener=function(e,t){return eo(this,e,t,!1)};M.prototype.on=M.prototype.addListener;M.prototype.prependListener=function(e,t){return eo(this,e,t,!0)};function du(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function to(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=du.bind(n);return i.listener=t,n.wrapFn=i,i}M.prototype.once=function(e,t){return Vt(t),this.on(e,to(this,e,t)),this};M.prototype.prependOnceListener=function(e,t){return Vt(t),this.prependListener(e,to(this,e,t)),this};M.prototype.removeListener=function(e,t){var n,i,o,s,a;if(Vt(t),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){a=n[s].listener,o=s;break}if(o<0)return this;o===0?n.shift():pu(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this};M.prototype.off=M.prototype.removeListener;M.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function ro(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?hu(i):io(i,i.length)}M.prototype.listeners=function(e){return ro(this,e,!0)};M.prototype.rawListeners=function(e){return ro(this,e,!1)};M.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):no.call(r,e)};M.prototype.listenerCount=no;function no(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}M.prototype.eventNames=function(){return this._eventsCount>0?Gt(this._events):[]};function io(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function pu(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function hu(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function mu(r,e){return new Promise(function(t,n){function i(){o!==void 0&&r.removeListener("error",o),t([].slice.call(arguments))}var o;e!=="error"&&(o=function(a){r.removeListener(e,i),n(a)},r.once("error",o)),r.once(e,i)})}});var pn=S((El,oo)=>{c();oo.exports=dn().EventEmitter});var hn=S(()=>{c()});var fo=S((Tl,uo)=>{"use strict";c();function so(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function gu(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?so(Object(t),!0).forEach(function(n){yu(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):so(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function yu(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function bu(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function ao(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function xu(r,e,t){return e&&ao(r.prototype,e),t&&ao(r,t),r}var _u=et(),zt=_u.Buffer,wu=hn(),mn=wu.inspect,vu=mn&&mn.custom||"inspect";function Eu(r,e,t){zt.prototype.copy.call(r,e,t)}uo.exports=function(){function r(){bu(this,r),this.head=null,this.tail=null,this.length=0}return xu(r,[{key:"push",value:function(t){var n={data:t,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(t){var n={data:t,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=t+n.data;return i}},{key:"concat",value:function(t){if(this.length===0)return zt.alloc(0);for(var n=zt.allocUnsafe(t>>>0),i=this.head,o=0;i;)Eu(i.data,n,o),o+=i.data.length,i=i.next;return n}},{key:"consume",value:function(t,n){var i;return t<this.head.data.length?(i=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):t===this.head.data.length?i=this.shift():i=n?this._getString(t):this._getBuffer(t),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var n=this.head,i=1,o=n.data;for(t-=o.length;n=n.next;){var s=n.data,a=t>s.length?s.length:t;if(a===s.length?o+=s:o+=s.slice(0,t),t-=a,t===0){a===s.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=s.slice(a));break}++i}return this.length-=i,o}},{key:"_getBuffer",value:function(t){var n=zt.allocUnsafe(t),i=this.head,o=1;for(i.data.copy(n),t-=i.data.length;i=i.next;){var s=i.data,a=t>s.length?s.length:t;if(s.copy(n,n.length-t,0,a),t-=a,t===0){a===s.length?(++o,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=s.slice(a));break}++o}return this.length-=o,n}},{key:vu,value:function(t,n){return mn(this,gu({},n,{depth:0,customInspect:!1}))}}]),r}()});var yn=S((Cl,lo)=>{"use strict";c();function Su(r,e){var t=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(gn,this,r)):process.nextTick(gn,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(o){!e&&o?t._writableState?t._writableState.errorEmitted?process.nextTick(Yt,t):(t._writableState.errorEmitted=!0,process.nextTick(co,t,o)):process.nextTick(co,t,o):e?(process.nextTick(Yt,t),e(o)):process.nextTick(Yt,t)}),this)}function co(r,e){gn(r,e),Yt(r)}function Yt(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function Ru(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function gn(r,e){r.emit("error",e)}function Tu(r,e){var t=r._readableState,n=r._writableState;t&&t.autoDestroy||n&&n.autoDestroy?r.destroy(e):r.emit("error",e)}lo.exports={destroy:Su,undestroy:Ru,errorOrDestroy:Tu}});var qe=S((Bl,mo)=>{"use strict";c();function Cu(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}var ho={};function Z(r,e,t){t||(t=Error);function n(o,s,a){return typeof e=="string"?e:e(o,s,a)}var i=function(o){Cu(s,o);function s(a,u,f){return o.call(this,n(a,u,f))||this}return s}(t);i.prototype.name=t.name,i.prototype.code=r,ho[r]=i}function po(r,e){if(Array.isArray(r)){var t=r.length;return r=r.map(function(n){return String(n)}),t>2?"one of ".concat(e," ").concat(r.slice(0,t-1).join(", "),", or ")+r[t-1]:t===2?"one of ".concat(e," ").concat(r[0]," or ").concat(r[1]):"of ".concat(e," ").concat(r[0])}else return"of ".concat(e," ").concat(String(r))}function Bu(r,e,t){return r.substr(!t||t<0?0:+t,e.length)===e}function Mu(r,e,t){return(t===void 0||t>r.length)&&(t=r.length),r.substring(t-e.length,t)===e}function Lu(r,e,t){return typeof t!="number"&&(t=0),t+e.length>r.length?!1:r.indexOf(e,t)!==-1}Z("ERR_INVALID_OPT_VALUE",function(r,e){return'The value "'+e+'" is invalid for option "'+r+'"'},TypeError);Z("ERR_INVALID_ARG_TYPE",function(r,e,t){var n;typeof e=="string"&&Bu(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(Mu(r," argument"))i="The ".concat(r," ").concat(n," ").concat(po(e,"type"));else{var o=Lu(r,".")?"property":"argument";i='The "'.concat(r,'" ').concat(o," ").concat(n," ").concat(po(e,"type"))}return i+=". Received type ".concat(typeof t),i},TypeError);Z("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Z("ERR_METHOD_NOT_IMPLEMENTED",function(r){return"The "+r+" method is not implemented"});Z("ERR_STREAM_PREMATURE_CLOSE","Premature close");Z("ERR_STREAM_DESTROYED",function(r){return"Cannot call "+r+" after a stream was destroyed"});Z("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Z("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Z("ERR_STREAM_WRITE_AFTER_END","write after end");Z("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Z("ERR_UNKNOWN_ENCODING",function(r){return"Unknown encoding: "+r},TypeError);Z("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");mo.exports.codes=ho});var bn=S((Ml,go)=>{"use strict";c();var Iu=qe().codes.ERR_INVALID_OPT_VALUE;function Au(r,e,t){return r.highWaterMark!=null?r.highWaterMark:e?r[t]:null}function Fu(r,e,t,n){var i=Au(e,n,t);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var o=n?t:"highWaterMark";throw new Iu(o,i)}return Math.floor(i)}return r.objectMode?16:16*1024}go.exports={getHighWaterMark:Fu}});var bo=S((Ll,yo)=>{c();yo.exports=Pu;function Pu(r,e){if(xn("noDeprecation"))return r;var t=!1;function n(){if(!t){if(xn("throwDeprecation"))throw new Error(e);xn("traceDeprecation")?console.trace(e):console.warn(e),t=!0}return r.apply(this,arguments)}return n}function xn(r){try{if(!window.localStorage)return!1}catch(t){return!1}var e=window.localStorage[r];return e==null?!1:String(e).toLowerCase()==="true"}});var vn=S((Il,So)=>{"use strict";c();So.exports=P;function _o(r){var e=this;this.next=null,this.entry=null,this.finish=function(){uf(e,r)}}var it;P.WritableState=Bt;var ku={deprecate:bo()},wo=pn(),Xt=et().Buffer,Ou=window.Uint8Array||function(){};function Uu(r){return Xt.from(r)}function Du(r){return Xt.isBuffer(r)||r instanceof Ou}var wn=yn(),Nu=bn(),Hu=Nu.getHighWaterMark,Ee=qe().codes,qu=Ee.ERR_INVALID_ARG_TYPE,ju=Ee.ERR_METHOD_NOT_IMPLEMENTED,Wu=Ee.ERR_MULTIPLE_CALLBACK,$u=Ee.ERR_STREAM_CANNOT_PIPE,Gu=Ee.ERR_STREAM_DESTROYED,Vu=Ee.ERR_STREAM_NULL_VALUES,zu=Ee.ERR_STREAM_WRITE_AFTER_END,Yu=Ee.ERR_UNKNOWN_ENCODING,ot=wn.errorOrDestroy;He()(P,wo);function Ku(){}function Bt(r,e,t){it=it||je(),r=r||{},typeof t!="boolean"&&(t=e instanceof it),this.objectMode=!!r.objectMode,t&&(this.objectMode=this.objectMode||!!r.writableObjectMode),this.highWaterMark=Hu(this,r,"writableHighWaterMark",t),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=r.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){rf(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=r.emitClose!==!1,this.autoDestroy=!!r.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new _o(this)}Bt.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};(function(){try{Object.defineProperty(Bt.prototype,"buffer",{get:ku.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(r){}})();var Kt;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Kt=Function.prototype[Symbol.hasInstance],Object.defineProperty(P,Symbol.hasInstance,{value:function(e){return Kt.call(this,e)?!0:this!==P?!1:e&&e._writableState instanceof Bt}})):Kt=function(e){return e instanceof this};function P(r){it=it||je();var e=this instanceof it;if(!e&&!Kt.call(P,this))return new P(r);this._writableState=new Bt(r,this,e),this.writable=!0,r&&(typeof r.write=="function"&&(this._write=r.write),typeof r.writev=="function"&&(this._writev=r.writev),typeof r.destroy=="function"&&(this._destroy=r.destroy),typeof r.final=="function"&&(this._final=r.final)),wo.call(this)}P.prototype.pipe=function(){ot(this,new $u)};function Xu(r,e){var t=new zu;ot(r,t),process.nextTick(e,t)}function Ju(r,e,t,n){var i;return t===null?i=new Vu:typeof t!="string"&&!e.objectMode&&(i=new qu("chunk",["string","Buffer"],t)),i?(ot(r,i),process.nextTick(n,i),!1):!0}P.prototype.write=function(r,e,t){var n=this._writableState,i=!1,o=!n.objectMode&&Du(r);return o&&!Xt.isBuffer(r)&&(r=Uu(r)),typeof e=="function"&&(t=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),typeof t!="function"&&(t=Ku),n.ending?Xu(this,t):(o||Ju(this,n,r,t))&&(n.pendingcb++,i=Zu(this,n,o,r,e,t)),i};P.prototype.cork=function(){this._writableState.corked++};P.prototype.uncork=function(){var r=this._writableState;r.corked&&(r.corked--,!r.writing&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&vo(this,r))};P.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new Yu(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(P.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Qu(r,e,t){return!r.objectMode&&r.decodeStrings!==!1&&typeof e=="string"&&(e=Xt.from(e,t)),e}Object.defineProperty(P.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Zu(r,e,t,n,i,o){if(!t){var s=Qu(e,n,i);n!==s&&(t=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var f=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:t,callback:o,next:null},f?f.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else _n(r,e,!1,a,n,i,o);return u}function _n(r,e,t,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Gu("write")):t?r._writev(i,e.onwrite):r._write(i,o,e.onwrite),e.sync=!1}function ef(r,e,t,n,i){--e.pendingcb,t?(process.nextTick(i,n),process.nextTick(Ct,r,e),r._writableState.errorEmitted=!0,ot(r,n)):(i(n),r._writableState.errorEmitted=!0,ot(r,n),Ct(r,e))}function tf(r){r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0}function rf(r,e){var t=r._writableState,n=t.sync,i=t.writecb;if(typeof i!="function")throw new Wu;if(tf(t),e)ef(r,t,n,e,i);else{var o=Eo(t)||r.destroyed;!o&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&vo(r,t),n?process.nextTick(xo,r,t,o,i):xo(r,t,o,i)}}function xo(r,e,t,n){t||nf(r,e),e.pendingcb--,n(),Ct(r,e)}function nf(r,e){e.length===0&&e.needDrain&&(e.needDrain=!1,r.emit("drain"))}function vo(r,e){e.bufferProcessing=!0;var t=e.bufferedRequest;if(r._writev&&t&&t.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=t;for(var s=0,a=!0;t;)i[s]=t,t.isBuf||(a=!1),t=t.next,s+=1;i.allBuffers=a,_n(r,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new _o(e),e.bufferedRequestCount=0}else{for(;t;){var u=t.chunk,f=t.encoding,l=t.callback,d=e.objectMode?1:u.length;if(_n(r,e,!1,d,u,f,l),t=t.next,e.bufferedRequestCount--,e.writing)break}t===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=t,e.bufferProcessing=!1}P.prototype._write=function(r,e,t){t(new ju("_write()"))};P.prototype._writev=null;P.prototype.end=function(r,e,t){var n=this._writableState;return typeof r=="function"?(t=r,r=null,e=null):typeof e=="function"&&(t=e,e=null),r!=null&&this.write(r,e),n.corked&&(n.corked=1,this.uncork()),n.ending||af(this,n,t),this};Object.defineProperty(P.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Eo(r){return r.ending&&r.length===0&&r.bufferedRequest===null&&!r.finished&&!r.writing}function of(r,e){r._final(function(t){e.pendingcb--,t&&ot(r,t),e.prefinished=!0,r.emit("prefinish"),Ct(r,e)})}function sf(r,e){!e.prefinished&&!e.finalCalled&&(typeof r._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(of,r,e)):(e.prefinished=!0,r.emit("prefinish")))}function Ct(r,e){var t=Eo(e);if(t&&(sf(r,e),e.pendingcb===0&&(e.finished=!0,r.emit("finish"),e.autoDestroy))){var n=r._readableState;(!n||n.autoDestroy&&n.endEmitted)&&r.destroy()}return t}function af(r,e,t){e.ending=!0,Ct(r,e),t&&(e.finished?process.nextTick(t):r.once("finish",t)),e.ended=!0,r.writable=!1}function uf(r,e,t){var n=r.entry;for(r.entry=null;n;){var i=n.callback;e.pendingcb--,i(t),n=n.next}e.corkedRequestsFree.next=r}Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});P.prototype.destroy=wn.destroy;P.prototype._undestroy=wn.undestroy;P.prototype._destroy=function(r,e){e(r)}});var je=S((Al,To)=>{"use strict";c();var ff=Object.keys||function(r){var e=[];for(var t in r)e.push(t);return e};To.exports=ce;var Ro=Rn(),Sn=vn();He()(ce,Ro);for(En=ff(Sn.prototype),Jt=0;Jt<En.length;Jt++)Qt=En[Jt],ce.prototype[Qt]||(ce.prototype[Qt]=Sn.prototype[Qt]);var En,Qt,Jt;function ce(r){if(!(this instanceof ce))return new ce(r);Ro.call(this,r),Sn.call(this,r),this.allowHalfOpen=!0,r&&(r.readable===!1&&(this.readable=!1),r.writable===!1&&(this.writable=!1),r.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",cf)))}Object.defineProperty(ce.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(ce.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(ce.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function cf(){this._writableState.ended||process.nextTick(lf,this)}function lf(r){r.end()}Object.defineProperty(ce.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var Mo=S((Tn,Bo)=>{c();var Zt=et(),le=Zt.Buffer;function Co(r,e){for(var t in r)e[t]=r[t]}le.from&&le.alloc&&le.allocUnsafe&&le.allocUnsafeSlow?Bo.exports=Zt:(Co(Zt,Tn),Tn.Buffer=We);function We(r,e,t){return le(r,e,t)}We.prototype=Object.create(le.prototype);Co(le,We);We.from=function(r,e,t){if(typeof r=="number")throw new TypeError("Argument must not be a number");return le(r,e,t)};We.alloc=function(r,e,t){if(typeof r!="number")throw new TypeError("Argument must be a number");var n=le(r);return e!==void 0?typeof t=="string"?n.fill(e,t):n.fill(e):n.fill(0),n};We.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return le(r)};We.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return Zt.SlowBuffer(r)}});var Mn=S(Io=>{"use strict";c();var Bn=Mo().Buffer,Lo=Bn.isEncoding||function(r){switch(r=""+r,r&&r.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function df(r){if(!r)return"utf8";for(var e;;)switch(r){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return r;default:if(e)return;r=(""+r).toLowerCase(),e=!0}}function pf(r){var e=df(r);if(typeof e!="string"&&(Bn.isEncoding===Lo||!Lo(r)))throw new Error("Unknown encoding: "+r);return e||r}Io.StringDecoder=Mt;function Mt(r){this.encoding=pf(r);var e;switch(this.encoding){case"utf16le":this.text=xf,this.end=_f,e=4;break;case"utf8":this.fillLast=gf,e=4;break;case"base64":this.text=wf,this.end=vf,e=3;break;default:this.write=Ef,this.end=Sf;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Bn.allocUnsafe(e)}Mt.prototype.write=function(r){if(r.length===0)return"";var e,t;if(this.lastNeed){if(e=this.fillLast(r),e===void 0)return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<r.length?e?e+this.text(r,t):this.text(r,t):e||""};Mt.prototype.end=bf;Mt.prototype.text=yf;Mt.prototype.fillLast=function(r){if(this.lastNeed<=r.length)return r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,r.length),this.lastNeed-=r.length};function Cn(r){return r<=127?0:r>>5===6?2:r>>4===14?3:r>>3===30?4:r>>6===2?-1:-2}function hf(r,e,t){var n=e.length-1;if(n<t)return 0;var i=Cn(e[n]);return i>=0?(i>0&&(r.lastNeed=i-1),i):--n<t||i===-2?0:(i=Cn(e[n]),i>=0?(i>0&&(r.lastNeed=i-2),i):--n<t||i===-2?0:(i=Cn(e[n]),i>=0?(i>0&&(i===2?i=0:r.lastNeed=i-3),i):0))}function mf(r,e,t){if((e[0]&192)!==128)return r.lastNeed=0,"\uFFFD";if(r.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return r.lastNeed=1,"\uFFFD";if(r.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return r.lastNeed=2,"\uFFFD"}}function gf(r){var e=this.lastTotal-this.lastNeed,t=mf(this,r,e);if(t!==void 0)return t;if(this.lastNeed<=r.length)return r.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,e,0,r.length),this.lastNeed-=r.length}function yf(r,e){var t=hf(this,r,e);if(!this.lastNeed)return r.toString("utf8",e);this.lastTotal=t;var n=r.length-(t-this.lastNeed);return r.copy(this.lastChar,0,n),r.toString("utf8",e,n)}function bf(r){var e=r&&r.length?this.write(r):"";return this.lastNeed?e+"\uFFFD":e}function xf(r,e){if((r.length-e)%2===0){var t=r.toString("utf16le",e);if(t){var n=t.charCodeAt(t.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=r[r.length-1],r.toString("utf16le",e,r.length-1)}function _f(r){var e=r&&r.length?this.write(r):"";if(this.lastNeed){var t=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,t)}return e}function wf(r,e){var t=(r.length-e)%3;return t===0?r.toString("base64",e):(this.lastNeed=3-t,this.lastTotal=3,t===1?this.lastChar[0]=r[r.length-1]:(this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1]),r.toString("base64",e,r.length-t))}function vf(r){var e=r&&r.length?this.write(r):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function Ef(r){return r.toString(this.encoding)}function Sf(r){return r&&r.length?this.write(r):""}});var er=S((Pl,Po)=>{"use strict";c();var Ao=qe().codes.ERR_STREAM_PREMATURE_CLOSE;function Rf(r){var e=!1;return function(){if(!e){e=!0;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];r.apply(this,n)}}}function Tf(){}function Cf(r){return r.setHeader&&typeof r.abort=="function"}function Fo(r,e,t){if(typeof e=="function")return Fo(r,null,e);e||(e={}),t=Rf(t||Tf);var n=e.readable||e.readable!==!1&&r.readable,i=e.writable||e.writable!==!1&&r.writable,o=function(){r.writable||a()},s=r._writableState&&r._writableState.finished,a=function(){i=!1,s=!0,n||t.call(r)},u=r._readableState&&r._readableState.endEmitted,f=function(){n=!1,u=!0,i||t.call(r)},l=function(x){t.call(r,x)},d=function(){var x;if(n&&!u)return(!r._readableState||!r._readableState.ended)&&(x=new Ao),t.call(r,x);if(i&&!s)return(!r._writableState||!r._writableState.ended)&&(x=new Ao),t.call(r,x)},h=function(){r.req.on("finish",a)};return Cf(r)?(r.on("complete",a),r.on("abort",d),r.req?h():r.on("request",h)):i&&!r._writableState&&(r.on("end",o),r.on("close",o)),r.on("end",f),r.on("finish",a),e.error!==!1&&r.on("error",l),r.on("close",d),function(){r.removeListener("complete",a),r.removeListener("abort",d),r.removeListener("request",h),r.req&&r.req.removeListener("finish",a),r.removeListener("end",o),r.removeListener("close",o),r.removeListener("finish",a),r.removeListener("end",f),r.removeListener("error",l),r.removeListener("close",d)}}Po.exports=Fo});var Oo=S((kl,ko)=>{"use strict";c();var tr;function Se(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var Bf=er(),Re=Symbol("lastResolve"),$e=Symbol("lastReject"),Lt=Symbol("error"),rr=Symbol("ended"),Ge=Symbol("lastPromise"),Ln=Symbol("handlePromise"),Ve=Symbol("stream");function Te(r,e){return{value:r,done:e}}function Mf(r){var e=r[Re];if(e!==null){var t=r[Ve].read();t!==null&&(r[Ge]=null,r[Re]=null,r[$e]=null,e(Te(t,!1)))}}function Lf(r){process.nextTick(Mf,r)}function If(r,e){return function(t,n){r.then(function(){if(e[rr]){t(Te(void 0,!0));return}e[Ln](t,n)},n)}}var Af=Object.getPrototypeOf(function(){}),Ff=Object.setPrototypeOf((tr={get stream(){return this[Ve]},next:function(){var e=this,t=this[Lt];if(t!==null)return Promise.reject(t);if(this[rr])return Promise.resolve(Te(void 0,!0));if(this[Ve].destroyed)return new Promise(function(s,a){process.nextTick(function(){e[Lt]?a(e[Lt]):s(Te(void 0,!0))})});var n=this[Ge],i;if(n)i=new Promise(If(n,this));else{var o=this[Ve].read();if(o!==null)return Promise.resolve(Te(o,!1));i=new Promise(this[Ln])}return this[Ge]=i,i}},Se(tr,Symbol.asyncIterator,function(){return this}),Se(tr,"return",function(){var e=this;return new Promise(function(t,n){e[Ve].destroy(null,function(i){if(i){n(i);return}t(Te(void 0,!0))})})}),tr),Af),Pf=function(e){var t,n=Object.create(Ff,(t={},Se(t,Ve,{value:e,writable:!0}),Se(t,Re,{value:null,writable:!0}),Se(t,$e,{value:null,writable:!0}),Se(t,Lt,{value:null,writable:!0}),Se(t,rr,{value:e._readableState.endEmitted,writable:!0}),Se(t,Ln,{value:function(o,s){var a=n[Ve].read();a?(n[Ge]=null,n[Re]=null,n[$e]=null,o(Te(a,!1))):(n[Re]=o,n[$e]=s)},writable:!0}),t));return n[Ge]=null,Bf(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var o=n[$e];o!==null&&(n[Ge]=null,n[Re]=null,n[$e]=null,o(i)),n[Lt]=i;return}var s=n[Re];s!==null&&(n[Ge]=null,n[Re]=null,n[$e]=null,s(Te(void 0,!0))),n[rr]=!0}),e.on("readable",Lf.bind(null,n)),n};ko.exports=Pf});var Do=S((Ol,Uo)=>{c();Uo.exports=function(){throw new Error("Readable.from is not available in the browser")}});var Rn=S((Dl,Yo)=>{"use strict";c();Yo.exports=E;var st;E.ReadableState=jo;var Ul=dn().EventEmitter,qo=function(e,t){return e.listeners(t).length},At=pn(),nr=et().Buffer,kf=window.Uint8Array||function(){};function Of(r){return nr.from(r)}function Uf(r){return nr.isBuffer(r)||r instanceof kf}var In=hn(),w;In&&In.debuglog?w=In.debuglog("stream"):w=function(){};var Df=fo(),Dn=yn(),Nf=bn(),Hf=Nf.getHighWaterMark,ir=qe().codes,qf=ir.ERR_INVALID_ARG_TYPE,jf=ir.ERR_STREAM_PUSH_AFTER_EOF,Wf=ir.ERR_METHOD_NOT_IMPLEMENTED,$f=ir.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,at,An,Fn;He()(E,At);var It=Dn.errorOrDestroy,Pn=["error","close","destroy","pause","resume"];function Gf(r,e,t){if(typeof r.prependListener=="function")return r.prependListener(e,t);!r._events||!r._events[e]?r.on(e,t):Array.isArray(r._events[e])?r._events[e].unshift(t):r._events[e]=[t,r._events[e]]}function jo(r,e,t){st=st||je(),r=r||{},typeof t!="boolean"&&(t=e instanceof st),this.objectMode=!!r.objectMode,t&&(this.objectMode=this.objectMode||!!r.readableObjectMode),this.highWaterMark=Hf(this,r,"readableHighWaterMark",t),this.buffer=new Df,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=r.emitClose!==!1,this.autoDestroy=!!r.autoDestroy,this.destroyed=!1,this.defaultEncoding=r.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,r.encoding&&(at||(at=Mn().StringDecoder),this.decoder=new at(r.encoding),this.encoding=r.encoding)}function E(r){if(st=st||je(),!(this instanceof E))return new E(r);var e=this instanceof st;this._readableState=new jo(r,this,e),this.readable=!0,r&&(typeof r.read=="function"&&(this._read=r.read),typeof r.destroy=="function"&&(this._destroy=r.destroy)),At.call(this)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});E.prototype.destroy=Dn.destroy;E.prototype._undestroy=Dn.undestroy;E.prototype._destroy=function(r,e){e(r)};E.prototype.push=function(r,e){var t=this._readableState,n;return t.objectMode?n=!0:typeof r=="string"&&(e=e||t.defaultEncoding,e!==t.encoding&&(r=nr.from(r,e),e=""),n=!0),Wo(this,r,e,!1,n)};E.prototype.unshift=function(r){return Wo(this,r,null,!0,!1)};function Wo(r,e,t,n,i){w("readableAddChunk",e);var o=r._readableState;if(e===null)o.reading=!1,Yf(r,o);else{var s;if(i||(s=Vf(o,e)),s)It(r,s);else if(o.objectMode||e&&e.length>0)if(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==nr.prototype&&(e=Of(e)),n)o.endEmitted?It(r,new $f):kn(r,o,e,!0);else if(o.ended)It(r,new jf);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!t?(e=o.decoder.write(e),o.objectMode||e.length!==0?kn(r,o,e,!1):Un(r,o)):kn(r,o,e,!1)}else n||(o.reading=!1,Un(r,o))}return!o.ended&&(o.length<o.highWaterMark||o.length===0)}function kn(r,e,t,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,r.emit("data",t)):(e.length+=e.objectMode?1:t.length,n?e.buffer.unshift(t):e.buffer.push(t),e.needReadable&&or(r)),Un(r,e)}function Vf(r,e){var t;return!Uf(e)&&typeof e!="string"&&e!==void 0&&!r.objectMode&&(t=new qf("chunk",["string","Buffer","Uint8Array"],e)),t}E.prototype.isPaused=function(){return this._readableState.flowing===!1};E.prototype.setEncoding=function(r){at||(at=Mn().StringDecoder);var e=new at(r);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var t=this._readableState.buffer.head,n="";t!==null;)n+=e.write(t.data),t=t.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var No=1073741824;function zf(r){return r>=No?r=No:(r--,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r++),r}function Ho(r,e){return r<=0||e.length===0&&e.ended?0:e.objectMode?1:r!==r?e.flowing&&e.length?e.buffer.head.data.length:e.length:(r>e.highWaterMark&&(e.highWaterMark=zf(r)),r<=e.length?r:e.ended?e.length:(e.needReadable=!0,0))}E.prototype.read=function(r){w("read",r),r=parseInt(r,10);var e=this._readableState,t=r;if(r!==0&&(e.emittedReadable=!1),r===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return w("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?On(this):or(this),null;if(r=Ho(r,e),r===0&&e.ended)return e.length===0&&On(this),null;var n=e.needReadable;w("need readable",n),(e.length===0||e.length-r<e.highWaterMark)&&(n=!0,w("length less than watermark",n)),e.ended||e.reading?(n=!1,w("reading or ended",n)):n&&(w("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(r=Ho(t,e)));var i;return r>0?i=Vo(r,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,r=0):(e.length-=r,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),t!==r&&e.ended&&On(this)),i!==null&&this.emit("data",i),i};function Yf(r,e){if(w("onEofChunk"),!e.ended){if(e.decoder){var t=e.decoder.end();t&&t.length&&(e.buffer.push(t),e.length+=e.objectMode?1:t.length)}e.ended=!0,e.sync?or(r):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,$o(r)))}}function or(r){var e=r._readableState;w("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(w("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick($o,r))}function $o(r){var e=r._readableState;w("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(r.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Nn(r)}function Un(r,e){e.readingMore||(e.readingMore=!0,process.nextTick(Kf,r,e))}function Kf(r,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var t=e.length;if(w("maybeReadMore read 0"),r.read(0),t===e.length)break}e.readingMore=!1}E.prototype._read=function(r){It(this,new Wf("_read()"))};E.prototype.pipe=function(r,e){var t=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=r;break;case 1:n.pipes=[n.pipes,r];break;default:n.pipes.push(r);break}n.pipesCount+=1,w("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&r!==process.stdout&&r!==process.stderr,o=i?a:y;n.endEmitted?process.nextTick(o):t.once("end",o),r.on("unpipe",s);function s(_,b){w("onunpipe"),_===t&&b&&b.hasUnpiped===!1&&(b.hasUnpiped=!0,l())}function a(){w("onend"),r.end()}var u=Xf(t);r.on("drain",u);var f=!1;function l(){w("cleanup"),r.removeListener("close",m),r.removeListener("finish",x),r.removeListener("drain",u),r.removeListener("error",h),r.removeListener("unpipe",s),t.removeListener("end",a),t.removeListener("end",y),t.removeListener("data",d),f=!0,n.awaitDrain&&(!r._writableState||r._writableState.needDrain)&&u()}t.on("data",d);function d(_){w("ondata");var b=r.write(_);w("dest.write",b),b===!1&&((n.pipesCount===1&&n.pipes===r||n.pipesCount>1&&zo(n.pipes,r)!==-1)&&!f&&(w("false write response, pause",n.awaitDrain),n.awaitDrain++),t.pause())}function h(_){w("onerror",_),y(),r.removeListener("error",h),qo(r,"error")===0&&It(r,_)}Gf(r,"error",h);function m(){r.removeListener("finish",x),y()}r.once("close",m);function x(){w("onfinish"),r.removeListener("close",m),y()}r.once("finish",x);function y(){w("unpipe"),t.unpipe(r)}return r.emit("pipe",t),n.flowing||(w("pipe resume"),t.resume()),r};function Xf(r){return function(){var t=r._readableState;w("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&qo(r,"data")&&(t.flowing=!0,Nn(r))}}E.prototype.unpipe=function(r){var e=this._readableState,t={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return r&&r!==e.pipes?this:(r||(r=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,r&&r.emit("unpipe",this,t),this);if(!r){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=zo(e.pipes,r);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),r.emit("unpipe",this,t),this)};E.prototype.on=function(r,e){var t=At.prototype.on.call(this,r,e),n=this._readableState;return r==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):r==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,w("on readable",n.length,n.reading),n.length?or(this):n.reading||process.nextTick(Jf,this)),t};E.prototype.addListener=E.prototype.on;E.prototype.removeListener=function(r,e){var t=At.prototype.removeListener.call(this,r,e);return r==="readable"&&process.nextTick(Go,this),t};E.prototype.removeAllListeners=function(r){var e=At.prototype.removeAllListeners.apply(this,arguments);return(r==="readable"||r===void 0)&&process.nextTick(Go,this),e};function Go(r){var e=r._readableState;e.readableListening=r.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:r.listenerCount("data")>0&&r.resume()}function Jf(r){w("readable nexttick read 0"),r.read(0)}E.prototype.resume=function(){var r=this._readableState;return r.flowing||(w("resume"),r.flowing=!r.readableListening,Qf(this,r)),r.paused=!1,this};function Qf(r,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(Zf,r,e))}function Zf(r,e){w("resume",e.reading),e.reading||r.read(0),e.resumeScheduled=!1,r.emit("resume"),Nn(r),e.flowing&&!e.reading&&r.read(0)}E.prototype.pause=function(){return w("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(w("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Nn(r){var e=r._readableState;for(w("flow",e.flowing);e.flowing&&r.read()!==null;);}E.prototype.wrap=function(r){var e=this,t=this._readableState,n=!1;r.on("end",function(){if(w("wrapped end"),t.decoder&&!t.ended){var s=t.decoder.end();s&&s.length&&e.push(s)}e.push(null)}),r.on("data",function(s){if(w("wrapped data"),t.decoder&&(s=t.decoder.write(s)),!(t.objectMode&&s==null)&&!(!t.objectMode&&(!s||!s.length))){var a=e.push(s);a||(n=!0,r.pause())}});for(var i in r)this[i]===void 0&&typeof r[i]=="function"&&(this[i]=function(a){return function(){return r[a].apply(r,arguments)}}(i));for(var o=0;o<Pn.length;o++)r.on(Pn[o],this.emit.bind(this,Pn[o]));return this._read=function(s){w("wrapped _read",s),n&&(n=!1,r.resume())},this};typeof Symbol=="function"&&(E.prototype[Symbol.asyncIterator]=function(){return An===void 0&&(An=Oo()),An(this)});Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});E._fromList=Vo;Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function Vo(r,e){if(e.length===0)return null;var t;return e.objectMode?t=e.buffer.shift():!r||r>=e.length?(e.decoder?t=e.buffer.join(""):e.buffer.length===1?t=e.buffer.first():t=e.buffer.concat(e.length),e.buffer.clear()):t=e.buffer.consume(r,e.decoder),t}function On(r){var e=r._readableState;w("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(ec,e,r))}function ec(r,e){if(w("endReadableNT",r.endEmitted,r.length),!r.endEmitted&&r.length===0&&(r.endEmitted=!0,e.readable=!1,e.emit("end"),r.autoDestroy)){var t=e._writableState;(!t||t.autoDestroy&&t.finished)&&e.destroy()}}typeof Symbol=="function"&&(E.from=function(r,e){return Fn===void 0&&(Fn=Do()),Fn(E,r,e)});function zo(r,e){for(var t=0,n=r.length;t<n;t++)if(r[t]===e)return t;return-1}});var Hn=S((Nl,Xo)=>{"use strict";c();Xo.exports=be;var sr=qe().codes,tc=sr.ERR_METHOD_NOT_IMPLEMENTED,rc=sr.ERR_MULTIPLE_CALLBACK,nc=sr.ERR_TRANSFORM_ALREADY_TRANSFORMING,ic=sr.ERR_TRANSFORM_WITH_LENGTH_0,ar=je();He()(be,ar);function oc(r,e){var t=this._transformState;t.transforming=!1;var n=t.writecb;if(n===null)return this.emit("error",new rc);t.writechunk=null,t.writecb=null,e!=null&&this.push(e),n(r);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function be(r){if(!(this instanceof be))return new be(r);ar.call(this,r),this._transformState={afterTransform:oc.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.on("prefinish",sc)}function sc(){var r=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,t){Ko(r,e,t)}):Ko(this,null,null)}be.prototype.push=function(r,e){return this._transformState.needTransform=!1,ar.prototype.push.call(this,r,e)};be.prototype._transform=function(r,e,t){t(new tc("_transform()"))};be.prototype._write=function(r,e,t){var n=this._transformState;if(n.writecb=t,n.writechunk=r,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};be.prototype._read=function(r){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};be.prototype._destroy=function(r,e){ar.prototype._destroy.call(this,r,function(t){e(t)})};function Ko(r,e,t){if(e)return r.emit("error",e);if(t!=null&&r.push(t),r._writableState.length)throw new ic;if(r._transformState.transforming)throw new nc;return r.push(null)}});var Zo=S((Hl,Qo)=>{"use strict";c();Qo.exports=Ft;var Jo=Hn();He()(Ft,Jo);function Ft(r){if(!(this instanceof Ft))return new Ft(r);Jo.call(this,r)}Ft.prototype._transform=function(r,e,t){t(null,r)}});var is=S((ql,ns)=>{"use strict";c();var qn;function ac(r){var e=!1;return function(){e||(e=!0,r.apply(void 0,arguments))}}var rs=qe().codes,uc=rs.ERR_MISSING_ARGS,fc=rs.ERR_STREAM_DESTROYED;function es(r){if(r)throw r}function cc(r){return r.setHeader&&typeof r.abort=="function"}function lc(r,e,t,n){n=ac(n);var i=!1;r.on("close",function(){i=!0}),qn===void 0&&(qn=er()),qn(r,{readable:e,writable:t},function(s){if(s)return n(s);i=!0,n()});var o=!1;return function(s){if(!i&&!o){if(o=!0,cc(r))return r.abort();if(typeof r.destroy=="function")return r.destroy();n(s||new fc("pipe"))}}}function ts(r){r()}function dc(r,e){return r.pipe(e)}function pc(r){return!r.length||typeof r[r.length-1]!="function"?es:r.pop()}function hc(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];var n=pc(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new uc("streams");var i,o=e.map(function(s,a){var u=a<e.length-1,f=a>0;return lc(s,u,f,function(l){i||(i=l),l&&o.forEach(ts),!u&&(o.forEach(ts),n(i))})});return e.reduce(dc)}ns.exports=hc});var H=S((jl,os)=>{c();os.exports=ee;var jn=Ki().EventEmitter,mc=He();mc(ee,jn);ee.Readable=Rn();ee.Writable=vn();ee.Duplex=je();ee.Transform=Hn();ee.PassThrough=Zo();ee.finished=er();ee.pipeline=is();ee.Stream=ee;function ee(){jn.call(this)}ee.prototype.pipe=function(r,e){var t=this;function n(l){r.writable&&r.write(l)===!1&&t.pause&&t.pause()}t.on("data",n);function i(){t.readable&&t.resume&&t.resume()}r.on("drain",i),!r._isStdio&&(!e||e.end!==!1)&&(t.on("end",s),t.on("close",a));var o=!1;function s(){o||(o=!0,r.end())}function a(){o||(o=!0,typeof r.destroy=="function"&&r.destroy())}function u(l){if(f(),jn.listenerCount(this,"error")===0)throw l}t.on("error",u),r.on("error",u);function f(){t.removeListener("data",n),r.removeListener("drain",i),t.removeListener("end",s),t.removeListener("close",a),t.removeListener("error",u),r.removeListener("error",u),t.removeListener("end",f),t.removeListener("close",f),r.removeListener("close",f)}return t.on("end",f),t.on("close",f),r.on("close",f),r.emit("pipe",t),r}});var ms=S((Td,hs)=>{c();var lt=1e3,dt=lt*60,pt=dt*60,Ye=pt*24,bc=Ye*7,xc=Ye*365.25;hs.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return _c(r);if(t==="number"&&isFinite(r))return e.long?vc(r):wc(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function _c(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(!!e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*xc;case"weeks":case"week":case"w":return t*bc;case"days":case"day":case"d":return t*Ye;case"hours":case"hour":case"hrs":case"hr":case"h":return t*pt;case"minutes":case"minute":case"mins":case"min":case"m":return t*dt;case"seconds":case"second":case"secs":case"sec":case"s":return t*lt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function wc(r){var e=Math.abs(r);return e>=Ye?Math.round(r/Ye)+"d":e>=pt?Math.round(r/pt)+"h":e>=dt?Math.round(r/dt)+"m":e>=lt?Math.round(r/lt)+"s":r+"ms"}function vc(r){var e=Math.abs(r);return e>=Ye?pr(r,e,Ye,"day"):e>=pt?pr(r,e,pt,"hour"):e>=dt?pr(r,e,dt,"minute"):e>=lt?pr(r,e,lt,"second"):r+" ms"}function pr(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var ys=S((Cd,gs)=>{c();function Ec(r){t.debug=t,t.default=t,t.coerce=u,t.disable=o,t.enable=i,t.enabled=s,t.humanize=ms(),t.destroy=f,Object.keys(r).forEach(l=>{t[l]=r[l]}),t.names=[],t.skips=[],t.formatters={};function e(l){let d=0;for(let h=0;h<l.length;h++)d=(d<<5)-d+l.charCodeAt(h),d|=0;return t.colors[Math.abs(d)%t.colors.length]}t.selectColor=e;function t(l){let d,h=null,m,x;function y(..._){if(!y.enabled)return;let b=y,v=Number(new Date),j=v-(d||v);b.diff=j,b.prev=d,b.curr=v,d=v,_[0]=t.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let F=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(K,Ke)=>{if(K==="%%")return"%";F++;let ke=t.formatters[Ke];if(typeof ke=="function"){let Oe=_[F];K=ke.call(b,Oe),_.splice(F,1),F--}return K}),t.formatArgs.call(b,_),(b.log||t.log).apply(b,_)}return y.namespace=l,y.useColors=t.useColors(),y.color=t.selectColor(l),y.extend=n,y.destroy=t.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(m!==t.namespaces&&(m=t.namespaces,x=t.enabled(l)),x),set:_=>{h=_}}),typeof t.init=="function"&&t.init(y),y}function n(l,d){let h=t(this.namespace+(typeof d=="undefined"?":":d)+l);return h.log=this.log,h}function i(l){t.save(l),t.namespaces=l,t.names=[],t.skips=[];let d,h=(typeof l=="string"?l:"").split(/[\s,]+/),m=h.length;for(d=0;d<m;d++)!h[d]||(l=h[d].replace(/\*/g,".*?"),l[0]==="-"?t.skips.push(new RegExp("^"+l.slice(1)+"$")):t.names.push(new RegExp("^"+l+"$")))}function o(){let l=[...t.names.map(a),...t.skips.map(a).map(d=>"-"+d)].join(",");return t.enable(""),l}function s(l){if(l[l.length-1]==="*")return!0;let d,h;for(d=0,h=t.skips.length;d<h;d++)if(t.skips[d].test(l))return!1;for(d=0,h=t.names.length;d<h;d++)if(t.names[d].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function u(l){return l instanceof Error?l.stack||l.message:l}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}gs.exports=Ec});var he=S((Y,hr)=>{c();Y.formatArgs=Rc;Y.save=Tc;Y.load=Cc;Y.useColors=Sc;Y.storage=Bc();Y.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Y.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Sc(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Rc(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+hr.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}Y.log=console.debug||console.log||(()=>{});function Tc(r){try{r?Y.storage.setItem("debug",r):Y.storage.removeItem("debug")}catch(e){}}function Cc(){let r;try{r=Y.storage.getItem("debug")}catch(e){}return!r&&typeof process!="undefined"&&"env"in process&&(r=process.env.DEBUG),r}function Bc(){try{return localStorage}catch(r){}}hr.exports=ys()(Y);var{formatters:Mc}=hr.exports;Mc.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var ca=S(oi=>{"use strict";c();Object.defineProperty(oi,"__esModule",{value:!0});var fa=function(){function r(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}return r.hashStr=function(e,t){return t===void 0&&(t=!1),this.onePassHasher.start().appendStr(e).end(t)},r.hashAsciiStr=function(e,t){return t===void 0&&(t=!1),this.onePassHasher.start().appendAsciiStr(e).end(t)},r._hex=function(e){var t=r.hexChars,n=r.hexOut,i,o,s,a;for(a=0;a<4;a+=1)for(o=a*8,i=e[a],s=0;s<8;s+=2)n[o+1+s]=t.charAt(i&15),i>>>=4,n[o+0+s]=t.charAt(i&15),i>>>=4;return n.join("")},r._md5cycle=function(e,t){var n=e[0],i=e[1],o=e[2],s=e[3];n+=(i&o|~i&s)+t[0]-680876936|0,n=(n<<7|n>>>25)+i|0,s+=(n&i|~n&o)+t[1]-389564586|0,s=(s<<12|s>>>20)+n|0,o+=(s&n|~s&i)+t[2]+606105819|0,o=(o<<17|o>>>15)+s|0,i+=(o&s|~o&n)+t[3]-1044525330|0,i=(i<<22|i>>>10)+o|0,n+=(i&o|~i&s)+t[4]-176418897|0,n=(n<<7|n>>>25)+i|0,s+=(n&i|~n&o)+t[5]+1200080426|0,s=(s<<12|s>>>20)+n|0,o+=(s&n|~s&i)+t[6]-1473231341|0,o=(o<<17|o>>>15)+s|0,i+=(o&s|~o&n)+t[7]-45705983|0,i=(i<<22|i>>>10)+o|0,n+=(i&o|~i&s)+t[8]+1770035416|0,n=(n<<7|n>>>25)+i|0,s+=(n&i|~n&o)+t[9]-1958414417|0,s=(s<<12|s>>>20)+n|0,o+=(s&n|~s&i)+t[10]-42063|0,o=(o<<17|o>>>15)+s|0,i+=(o&s|~o&n)+t[11]-1990404162|0,i=(i<<22|i>>>10)+o|0,n+=(i&o|~i&s)+t[12]+1804603682|0,n=(n<<7|n>>>25)+i|0,s+=(n&i|~n&o)+t[13]-40341101|0,s=(s<<12|s>>>20)+n|0,o+=(s&n|~s&i)+t[14]-1502002290|0,o=(o<<17|o>>>15)+s|0,i+=(o&s|~o&n)+t[15]+1236535329|0,i=(i<<22|i>>>10)+o|0,n+=(i&s|o&~s)+t[1]-165796510|0,n=(n<<5|n>>>27)+i|0,s+=(n&o|i&~o)+t[6]-1069501632|0,s=(s<<9|s>>>23)+n|0,o+=(s&i|n&~i)+t[11]+643717713|0,o=(o<<14|o>>>18)+s|0,i+=(o&n|s&~n)+t[0]-373897302|0,i=(i<<20|i>>>12)+o|0,n+=(i&s|o&~s)+t[5]-701558691|0,n=(n<<5|n>>>27)+i|0,s+=(n&o|i&~o)+t[10]+38016083|0,s=(s<<9|s>>>23)+n|0,o+=(s&i|n&~i)+t[15]-660478335|0,o=(o<<14|o>>>18)+s|0,i+=(o&n|s&~n)+t[4]-405537848|0,i=(i<<20|i>>>12)+o|0,n+=(i&s|o&~s)+t[9]+568446438|0,n=(n<<5|n>>>27)+i|0,s+=(n&o|i&~o)+t[14]-1019803690|0,s=(s<<9|s>>>23)+n|0,o+=(s&i|n&~i)+t[3]-187363961|0,o=(o<<14|o>>>18)+s|0,i+=(o&n|s&~n)+t[8]+1163531501|0,i=(i<<20|i>>>12)+o|0,n+=(i&s|o&~s)+t[13]-1444681467|0,n=(n<<5|n>>>27)+i|0,s+=(n&o|i&~o)+t[2]-51403784|0,s=(s<<9|s>>>23)+n|0,o+=(s&i|n&~i)+t[7]+1735328473|0,o=(o<<14|o>>>18)+s|0,i+=(o&n|s&~n)+t[12]-1926607734|0,i=(i<<20|i>>>12)+o|0,n+=(i^o^s)+t[5]-378558|0,n=(n<<4|n>>>28)+i|0,s+=(n^i^o)+t[8]-2022574463|0,s=(s<<11|s>>>21)+n|0,o+=(s^n^i)+t[11]+1839030562|0,o=(o<<16|o>>>16)+s|0,i+=(o^s^n)+t[14]-35309556|0,i=(i<<23|i>>>9)+o|0,n+=(i^o^s)+t[1]-1530992060|0,n=(n<<4|n>>>28)+i|0,s+=(n^i^o)+t[4]+1272893353|0,s=(s<<11|s>>>21)+n|0,o+=(s^n^i)+t[7]-155497632|0,o=(o<<16|o>>>16)+s|0,i+=(o^s^n)+t[10]-1094730640|0,i=(i<<23|i>>>9)+o|0,n+=(i^o^s)+t[13]+681279174|0,n=(n<<4|n>>>28)+i|0,s+=(n^i^o)+t[0]-358537222|0,s=(s<<11|s>>>21)+n|0,o+=(s^n^i)+t[3]-722521979|0,o=(o<<16|o>>>16)+s|0,i+=(o^s^n)+t[6]+76029189|0,i=(i<<23|i>>>9)+o|0,n+=(i^o^s)+t[9]-640364487|0,n=(n<<4|n>>>28)+i|0,s+=(n^i^o)+t[12]-421815835|0,s=(s<<11|s>>>21)+n|0,o+=(s^n^i)+t[15]+530742520|0,o=(o<<16|o>>>16)+s|0,i+=(o^s^n)+t[2]-995338651|0,i=(i<<23|i>>>9)+o|0,n+=(o^(i|~s))+t[0]-198630844|0,n=(n<<6|n>>>26)+i|0,s+=(i^(n|~o))+t[7]+1126891415|0,s=(s<<10|s>>>22)+n|0,o+=(n^(s|~i))+t[14]-1416354905|0,o=(o<<15|o>>>17)+s|0,i+=(s^(o|~n))+t[5]-57434055|0,i=(i<<21|i>>>11)+o|0,n+=(o^(i|~s))+t[12]+1700485571|0,n=(n<<6|n>>>26)+i|0,s+=(i^(n|~o))+t[3]-1894986606|0,s=(s<<10|s>>>22)+n|0,o+=(n^(s|~i))+t[10]-1051523|0,o=(o<<15|o>>>17)+s|0,i+=(s^(o|~n))+t[1]-2054922799|0,i=(i<<21|i>>>11)+o|0,n+=(o^(i|~s))+t[8]+1873313359|0,n=(n<<6|n>>>26)+i|0,s+=(i^(n|~o))+t[15]-30611744|0,s=(s<<10|s>>>22)+n|0,o+=(n^(s|~i))+t[6]-1560198380|0,o=(o<<15|o>>>17)+s|0,i+=(s^(o|~n))+t[13]+1309151649|0,i=(i<<21|i>>>11)+o|0,n+=(o^(i|~s))+t[4]-145523070|0,n=(n<<6|n>>>26)+i|0,s+=(i^(n|~o))+t[11]-1120210379|0,s=(s<<10|s>>>22)+n|0,o+=(n^(s|~i))+t[2]+718787259|0,o=(o<<15|o>>>17)+s|0,i+=(s^(o|~n))+t[9]-343485551|0,i=(i<<21|i>>>11)+o|0,e[0]=n+e[0]|0,e[1]=i+e[1]|0,e[2]=o+e[2]|0,e[3]=s+e[3]|0},r.prototype.start=function(){return this._dataLength=0,this._bufferLength=0,this._state.set(r.stateIdentity),this},r.prototype.appendStr=function(e){var t=this._buffer8,n=this._buffer32,i=this._bufferLength,o,s;for(s=0;s<e.length;s+=1){if(o=e.charCodeAt(s),o<128)t[i++]=o;else if(o<2048)t[i++]=(o>>>6)+192,t[i++]=o&63|128;else if(o<55296||o>56319)t[i++]=(o>>>12)+224,t[i++]=o>>>6&63|128,t[i++]=o&63|128;else{if(o=(o-55296)*1024+(e.charCodeAt(++s)-56320)+65536,o>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");t[i++]=(o>>>18)+240,t[i++]=o>>>12&63|128,t[i++]=o>>>6&63|128,t[i++]=o&63|128}i>=64&&(this._dataLength+=64,r._md5cycle(this._state,n),i-=64,n[0]=n[16])}return this._bufferLength=i,this},r.prototype.appendAsciiStr=function(e){for(var t=this._buffer8,n=this._buffer32,i=this._bufferLength,o,s=0;;){for(o=Math.min(e.length-s,64-i);o--;)t[i++]=e.charCodeAt(s++);if(i<64)break;this._dataLength+=64,r._md5cycle(this._state,n),i=0}return this._bufferLength=i,this},r.prototype.appendByteArray=function(e){for(var t=this._buffer8,n=this._buffer32,i=this._bufferLength,o,s=0;;){for(o=Math.min(e.length-s,64-i);o--;)t[i++]=e[s++];if(i<64)break;this._dataLength+=64,r._md5cycle(this._state,n),i=0}return this._bufferLength=i,this},r.prototype.getState=function(){var e=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[e[0],e[1],e[2],e[3]]}},r.prototype.setState=function(e){var t=e.buffer,n=e.state,i=this._state,o;for(this._dataLength=e.length,this._bufferLength=e.buflen,i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],o=0;o<t.length;o+=1)this._buffer8[o]=t.charCodeAt(o)},r.prototype.end=function(e){e===void 0&&(e=!1);var t=this._bufferLength,n=this._buffer8,i=this._buffer32,o=(t>>2)+1;this._dataLength+=t;var s=this._dataLength*8;if(n[t]=128,n[t+1]=n[t+2]=n[t+3]=0,i.set(r.buffer32Identity.subarray(o),o),t>55&&(r._md5cycle(this._state,i),i.set(r.buffer32Identity)),s<=4294967295)i[14]=s;else{var a=s.toString(16).match(/(.*?)(.{0,8})$/);if(a===null)return;var u=parseInt(a[2],16),f=parseInt(a[1],16)||0;i[14]=u,i[15]=f}return r._md5cycle(this._state,i),e?this._state:r._hex(this._state)},r.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),r.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),r.hexChars="0123456789abcdef",r.hexOut=[],r.onePassHasher=new r,r}();oi.Md5=fa;if(fa.hashStr("hello")!=="5d41402abc4b2a76b9719d911017c592")throw new Error("Md5 self test failed.")});var pl={};Dt(pl,{AACDepay:()=>ft,BasicDepay:()=>cr,CanvasSink:()=>ct,H264Depay:()=>ht,Html5CanvasPipeline:()=>$r,Html5VideoMetadataPipeline:()=>Gr,Html5VideoPipeline:()=>St,HttpMsePipeline:()=>Kr,HttpSource:()=>gr,Inspector:()=>yr,JPEGDepay:()=>mt,MessageType:()=>A,MetadataPipeline:()=>Vr,Mp4Capture:()=>xr,Mp4Muxer:()=>yt,MseSink:()=>Le,ONVIFDepay:()=>Ie,Pipeline:()=>Ae,RTCPPacketType:()=>Zn,RTSPResponseError:()=>Ot,RTSP_METHOD:()=>Hr,RtspMjpegPipeline:()=>Et,RtspMp4Pipeline:()=>vt,RtspParser:()=>xt,RtspPipeline:()=>ne,RtspSession:()=>wt,SDESItem:()=>ti,SR:()=>zs,Scheduler:()=>ze,Sink:()=>te,Source:()=>z,Tube:()=>R,WSSource:()=>V,WsSdpPipeline:()=>zr,addRTSPRetry:()=>ha,bodyOffset:()=>Or,cSrc:()=>cs,cSrcCount:()=>Be,components:()=>ii,connectionEnded:()=>Pr,contentBase:()=>Ar,contentLocation:()=>Fr,createTransform:()=>_e,extHeader:()=>ls,extHeaderLength:()=>Pt,extension:()=>fr,extractHeaderValue:()=>oe,extractURIs:()=>ia,getTime:()=>Dr,isRtcpApp:()=>Js,isRtcpBye:()=>Rr,isRtcpRR:()=>Ks,isRtcpSDES:()=>Xs,isRtcpSR:()=>Sr,marker:()=>pe,messageFromBuffer:()=>Br,padding:()=>as,parse:()=>ri,parseRtcp:()=>ei,payload:()=>re,payloadType:()=>U,pipelines:()=>ai,range:()=>kr,rtcpMessageFromBuffer:()=>Er,sSrc:()=>fs,sequence:()=>Mr,sequenceNumber:()=>us,sessionId:()=>Lr,sessionTimeout:()=>Ir,statusCode:()=>bt,timestamp:()=>q,utils:()=>ui,version:()=>ss});c();var ii={};Dt(ii,{AACDepay:()=>ft,BasicDepay:()=>cr,CanvasSink:()=>ct,H264Depay:()=>ht,HttpSource:()=>gr,Inspector:()=>yr,JPEGDepay:()=>mt,MessageType:()=>A,Mp4Capture:()=>xr,Mp4Muxer:()=>yt,MseSink:()=>Le,ONVIFDepay:()=>Ie,RTSPResponseError:()=>Ot,RTSP_METHOD:()=>Hr,RtspParser:()=>xt,RtspSession:()=>wt,Sink:()=>te,Source:()=>z,Tube:()=>R,WSSource:()=>V,createTransform:()=>_e});c();c();var xe=C(H());c();var Ce=C(H()),de=class{static consumer(e=()=>{}){return new Ce.Writable({objectMode:!0,write(t,n,i){e(t),i()}})}static peeker(e){if(typeof e!="function")throw new Error("you must supply a function");return new Ce.Transform({objectMode:!0,transform(t,n,i){e(t),i(void 0,t)}})}static producer(e){let t=0;return new Ce.Readable({objectMode:!0,read(){e!==void 0&&(t<e.length?this.push(e[t++]):this.push(null))}})}static recorder(e,t){return new Ce.Transform({objectMode:!0,transform(n,i,o){let s=Date.now(),a=Object.assign({},n,{data:n.data.toString("base64")});t.write(JSON.stringify({type:e,timestamp:s,message:a},null,2)),t.write(`,
`),o(void 0,n)}})}static replayer(e){let t=0,n=e[0].timestamp;return new Ce.Readable({objectMode:!0,read(){let i=e[t++];if(i){let{type:o,timestamp:s,message:a}=i,u=s-n;if(n=s,a){let f=a.data?Buffer.from(a.data,"base64"):Buffer.alloc(0),l=Object.assign({},a,{data:f});this.push({type:o,delay:u,msg:l})}else this.push({type:o,delay:u,msg:null})}else this.push(null)}})}};var ur=class{},z=class extends ur{constructor(t=new xe.Readable({objectMode:!0}),n=new xe.Writable({objectMode:!0})){super();this.incoming=t,this.outgoing=n,this.next=null,this.prev=null}static fromMessages(t){return new z(de.producer(t),de.consumer())}connect(t){if(t===null)return this;if(this.next!==null||t.prev!==null)throw new Error("connection failed: component(s) already connected");if(!this.incoming.readable||!this.outgoing.writable)throw new Error("connection failed: this component not compatible");if(!t.incoming.writable||!t.outgoing.readable)throw new Error("connection failed: next component not compatible");try{this.incoming.pipe(t.incoming),t.outgoing.pipe(this.outgoing)}catch(o){throw new Error(`connection failed: ${o.message}`)}let n=o=>{this.incoming.emit("error",o)};t.incoming.on("error",n);let i=o=>{t.outgoing.emit("error",o)};return this.outgoing.on("error",i),this.next=t,t.prev=this,this._incomingErrorHandler=n,this._outgoingErrorHandler=i,t}disconnect(){let t=this.next;return t!==null&&(this.incoming.unpipe(t.incoming),t.outgoing.unpipe(this.outgoing),typeof this._incomingErrorHandler!="undefined"&&t.incoming.removeListener("error",this._incomingErrorHandler),typeof this._outgoingErrorHandler!="undefined"&&this.outgoing.removeListener("error",this._outgoingErrorHandler),this.next=null,t.prev=null,delete this._incomingErrorHandler,delete this._outgoingErrorHandler),this}},R=class extends z{constructor(t=new xe.PassThrough({objectMode:!0}),n=new xe.PassThrough({objectMode:!0})){super(t,n);this.incoming=t,this.outgoing=n}static fromHandlers(t,n){let i=t?de.peeker(t):void 0,o=n?de.peeker(n):void 0;return new R(i,o)}},te=class extends ur{constructor(t=new xe.Writable({objectMode:!0}),n=new xe.Readable({objectMode:!0})){super();this.incoming=t,this.outgoing=n,this.next=null,this.prev=null}static fromHandler(t){let n=new te(de.consumer(t),de.producer(void 0));return n.incoming.on("finish",()=>{n.outgoing.push(null)}),n}connect(){throw new Error("connection failed: attempting to connect after a sink")}disconnect(){return this}};c();c();c();var ut=[128,64,32,16,8,4,2,1];var ss=r=>r[0]>>>6,as=r=>!!(r[0]&ut[2]),fr=r=>!!(r[0]&ut[3]),Be=r=>r[0]&15,pe=r=>!!(r[1]&ut[0]),U=r=>r[1]&127,us=r=>r.readUInt16BE(2),q=r=>r.readUInt32BE(4),fs=r=>r.readUInt32BE(8),cs=(r,e=0)=>Be(r)>e?r.readUInt32BE(12+e*4):0,Pt=r=>fr(r)?r.readUInt16BE(12+Be(r)*4+2):0,ls=r=>Pt(r)===0?Buffer.from([]):r.slice(12+Be(r)*4,12+Be(r)*4+4+Pt(r)*4),re=r=>fr(r)?r.slice(12+Be(r)*4+4+Pt(r)*4):r.slice(12+Be(r)*4);c();var A=(d=>(d[d.UNKNOWN=0]="UNKNOWN",d[d.RAW=1]="RAW",d[d.RTP=2]="RTP",d[d.RTCP=3]="RTCP",d[d.RTSP=4]="RTSP",d[d.SDP=5]="SDP",d[d.ELEMENTARY=6]="ELEMENTARY",d[d.H264=7]="H264",d[d.ISOM=8]="ISOM",d[d.XML=9]="XML",d[d.JPEG=10]="JPEG",d))(A||{});c();function ds(r,e,t){let n=re(r.data),i=0;if(e){let s=n.readUInt16BE(0);i=2+(s+s%8)/8}let o={type:6,data:n.slice(i),payloadType:U(r.data),timestamp:q(r.data),ntpTimestamp:r.ntpTimestamp};t(o)}c();var ps=C(H()),_e=r=>new ps.Transform({objectMode:!0,transform:r});var ft=class extends R{constructor(){let e,t,n=_e(function(i,o,s){if(i.type===5){let a;for(let u of i.sdp.media)u.type==="audio"&&u.fmtp&&u.fmtp.parameters&&u.fmtp.parameters.mode==="AAC-hbr"&&(a=u);if(a&&a.rtpmap!==void 0){e=Number(a.rtpmap.payloadType);let u=a.fmtp.parameters,f=Number(u.sizelength)||0,l=Number(u.indexlength)||0,d=Number(u.indexdeltalength)||0,h=Number(u.ctsdeltalength)||0,m=Number(u.dtsdeltalength)||0,x=Number(u.randomaccessindication)||0,y=Number(u.streamstateindication)||0,_=Number(u.auxiliarydatasizelength)||0;t=f+Math.max(l,d)+h+m+x+y+_>0}s(void 0,i)}else i.type===2&&U(i.data)===e?(ds(i,t,this.push.bind(this)),s()):s(void 0,i)});super(n)}};c();var cr=class extends R{constructor(e){if(e===void 0)throw new Error("you must supply a payload type to BasicDepayComponent");let t=Buffer.alloc(0),n=_e(function(i,o,s){if(i.type===2&&U(i.data)===e){let a=re(i.data);t=Buffer.concat([t,a]),pe(i.data)&&(t.length>0&&this.push({data:t,timestamp:q(i.data),ntpTimestamp:i.ntpTimestamp,payloadType:U(i.data),type:6}),t=Buffer.alloc(0)),s()}else s(void 0,i)});super(n)}};c();c();var lr=class{constructor(){this.elapsed=0,this.started=0,this.stopped=!0}start(){this.stopped&&(this.started=window.performance.now(),this.stopped=!1)}stop(){this.stopped||(this.elapsed=this.now(),this.stopped=!0)}reset(){this.elapsed=0,this.started=0,this.stopped=!0}now(){return this.stopped?this.elapsed:this.elapsed+(window.performance.now()-this.started)}play(){this.start()}pause(){this.stop()}get currentTime(){return this.now()/1e3}};c();var ze=class{constructor(e,t,n=10){this._clock=e,this._handler=t,this._tolerance=n,this._nextRun=0,this._nextPlay=0,this._fifo=[],this._ntpPresentationTime=0,this._suspended=!1}reset(){clearTimeout(this._nextRun),clearTimeout(this._nextPlay),this._fifo=[],this._ntpPresentationTime=0,this._suspended=!1}init(e){this._ntpPresentationTime=e}suspend(){clearTimeout(this._nextPlay),this._suspended=!0}resume(){this._suspended=!1,this.run(void 0)}run(e){if(clearTimeout(this._nextRun),typeof this._ntpPresentationTime=="undefined"||(typeof e!="undefined"&&this._fifo.push(e),this._suspended)||this._fifo.length===0)return;let t=0,n;do{let i=this._fifo.shift();if(i===void 0)throw new Error("internal error: message should never be undefined");n=i;let o=n.ntpTimestamp;if(o===void 0)continue;t=o-this._ntpPresentationTime-this._clock.currentTime*1e3,Math.abs(t)<this._tolerance&&this._handler&&this._handler(n)}while(t<this._tolerance&&this._fifo.length>0);t<-this._tolerance?(clearTimeout(this._nextPlay),this._clock.pause(),this._nextPlay=window.setTimeout(()=>this._clock.play(),-t)):t>this._tolerance&&(this._fifo.unshift(n),this._nextRun=window.setTimeout(()=>this.run(void 0),t))}};var dr=C(H()),gc=r=>{r.bitrate=0,r.framerate=0,r.renderedFrames=0},yc=r=>{let e=0,t=0,n=0;return(i,{byteLength:o,duration:s})=>{if(e+=o,t+=s,n++,t>=r){let a=8*e,u=n,f=t/r;i.bitrate=a/f,i.framerate=u/f,e=0,t=0,n=0}}},ct=class extends te{constructor(t){if(t===void 0)throw new Error("canvas element argument missing");let n=0,i=0,o=0,s={bitrate:0,framerate:0,renderedFrames:0},a,u=null;window.createImageBitmap!==void 0&&(u=t.getContext("bitmaprenderer")),u===null&&(u=t.getContext("2d"));let f;if(u===null)f=()=>{};else if("transferFromImageBitmap"in u){let b=u;f=({blob:v})=>{s.renderedFrames++,window.createImageBitmap(v).then(j=>{b.transferFromImageBitmap(j)}).catch(()=>{})}}else{let b=u,v=new Image;v.onload=()=>{b.drawImage(v,0,0)},f=({blob:j})=>{s.renderedFrames++;let F=window.URL.createObjectURL(j);v.src=F}}let l=new lr,d=new ze(l,f),h=0,m=()=>{this.onCanplay&&this.onCanplay()},x=b=>{this.onSync&&this.onSync(b)},y=new dr.Writable({objectMode:!0,write:(b,v,j)=>{if(b.type===5){l.reset(),d.reset(),n=0;let F=b.sdp.media.find(W=>W.type==="video"&&W.rtpmap!==void 0&&W.rtpmap.encodingName==="JPEG");F!==void 0&&F.rtpmap!==void 0&&(o=F.rtpmap.clockrate,gc(s),a=yc(o)),j()}else if(b.type===10){let{timestamp:F,ntpTimestamp:W}=b;if(!n){n=F,i=F;let{width:ke,height:Oe}=b.framesize;t.width=ke,t.height=Oe,d.init(0)}let K=1e3*(F-n)/o,Ke=new window.Blob([b.data],{type:"image/jpeg"});!h&&W&&(h=W-K,x(h)),d.run({ntpTimestamp:K,blob:Ke}),F===n&&m(),a(s,{byteLength:b.data.length,duration:F-i}),i=F,j()}else j()}}),_=new dr.Readable({objectMode:!0,read:function(){}});_.on("error",()=>{console.warn("outgoing stream broke somewhere")});super(y,_);this._clock=l,this._scheduler=d,this._info=s,this.onCanplay=void 0,this.onSync=void 0}get currentTime(){return this._clock.currentTime}pause(){this._scheduler.suspend(),this._clock.pause()}play(){this._clock.play(),this._scheduler.resume()}get bitrate(){return this._info.bitrate}get framerate(){return this._info.framerate}};c();var xs=C(H());c();var bs=C(he());var Lc=(0,bs.default)("msl:h264depay"),mr=class{constructor(){this._buffer=Buffer.alloc(0)}parse(e){let t=re(e.data),n=t[0]&31;if(n===28){let i=t[0],o=t[1],s=!!(o>>7),a=o&31,u=i&224|a,f=o&64;if(s)return this._buffer=Buffer.concat([Buffer.from([0,0,0,0,u]),t.slice(2)]),null;if(f){let l=Buffer.concat([this._buffer,t.slice(2)]);l.writeUInt32BE(l.length-4,0);let d={data:l,type:7,timestamp:q(e.data),ntpTimestamp:e.ntpTimestamp,payloadType:U(e.data),nalType:a};return this._buffer=Buffer.alloc(0),d}else return this._buffer=Buffer.concat([this._buffer,t.slice(2)]),null}else if((n===1||n===5)&&this._buffer.length===0){let i=Buffer.concat([Buffer.from([0,0,0,0]),t]);i.writeUInt32BE(i.length-4,0);let o={data:i,type:7,timestamp:q(e.data),ntpTimestamp:e.ntpTimestamp,payloadType:U(e.data),nalType:n};return this._buffer=Buffer.alloc(0),o}else return Lc(`H264depayComponent can only extract types 1,5 and 28, got ${n}`),this._buffer=Buffer.alloc(0),null}};var ht=class extends R{constructor(){let e,t=!1,n=[],i=new mr,o=new xs.Transform({objectMode:!0,transform:function(s,a,u){if(s.type===5){let f=s.sdp.media.find(l=>l.type==="video"&&l.rtpmap!==void 0&&l.rtpmap.encodingName==="H264");f!==void 0&&f.rtpmap!==void 0&&(e=f.rtpmap.payloadType),u(void 0,s)}else if(s.type===2&&U(s.data)===e){let f=pe(s.data),l=i.parse(s);if(l===null||!t&&l.nalType!==5){u();return}t=!0,n.push(l.data),f&&(this.push(we(X({},l),{data:n.length===1?n[0]:Buffer.concat(n)})),n=[]),u()}else u(void 0,s)}});super(o)}};c();var _s=C(he());var ws=C(H());var Wn=(0,_s.default)("msl:http-source"),gr=class extends z{constructor(t){let{uri:n,options:i}=t,o=new ws.Readable({objectMode:!0,read:function(){}});o.on("error",s=>{console.warn("closing socket due to incoming error",s),this._reader&&this._reader.cancel()});super(o);o._read=()=>{this._pull()},this.uri=n,this.options=i,this._allDone=!1}play(){if(this.uri===void 0)throw new Error("cannot start playing when there is no URI");this._abortController=new AbortController,this.length=0,fetch(this.uri,X({credentials:"include",signal:this._abortController.signal},this.options)).then(t=>{if(t.body===null)throw new Error("empty response body");this.onHeaders&&this.onHeaders(t.headers),this._reader=t.body.getReader(),this._pull()}).catch(t=>{console.error("http-source: fetch failed: ",t)})}abort(){this._reader&&this._reader.cancel().catch(t=>{console.log("http-source: cancel reader failed: ",t)}),this._abortController&&this._abortController.abort()}_isClosed(){return this._allDone}_close(){var t;this._reader=void 0,this._allDone=!0,this.incoming.push(null),(t=this.onServerClose)==null||t.call(this)}_pull(){this._reader!==void 0&&this._reader.read().then(({done:t,value:n})=>{if(t){this._isClosed()||(Wn("fetch completed, total downloaded: ",this.length," bytes"),this._close());return}if(n===void 0)throw new Error("expected value to be defined");if(this.length===void 0)throw new Error("expected length to be defined");this.length+=n.length;let i=Buffer.from(n);this.incoming.push({data:i,type:1})?this._pull():Wn("downstream back pressure: pausing read")}).catch(t=>{Wn("http-source: read failed: ",t),this._isClosed()||this._close()})}};c();var $n=C(H()),vs=(r,e)=>{let t=Date.now(),n=i=>{let o=Date.now();console.log(`${r}: +${o-t}ms`,i),t=o};return e===void 0?n:i=>i.type===e&&n(i)},yr=class extends R{constructor(e){let t=vs("incoming",e),n=new $n.Transform({objectMode:!0,transform:function(s,a,u){t(s),u(void 0,s)}}),i=vs("outgoing",e),o=new $n.Transform({objectMode:!0,transform:function(s,a,u){i(s),u(void 0,s)}});super(n,o)}};c();c();c();function Is(){return Buffer.from([255,216])}function As(r,e){let t=r&1?128:64,n=r&2?128:64;if(e.length!==t+n)throw new Error("invalid quantization table");let i=Buffer.from([255,219,0,t+3,0]),o=Buffer.from([255,219,0,n+3,1]);return Buffer.concat([i,e.slice(0,t),o,e.slice(t)])}function Fs(r,e,t){return Buffer.from([255,192,0,17,8,e>>8,e,r>>8,r,3,0,t===0?33:34,0,1,17,1,2,17,1])}var Es=[0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Ss=[0,1,2,3,4,5,6,7,8,9,10,11],Rs=[0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Ts=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Cs=[0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Bs=[0,1,2,3,4,5,6,7,8,9,10,11],Ms=[0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Ls=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Ps(){let r=[[255,196,0,3+Es.length+Ss.length,0],Es,Ss],e=[[255,196,0,3+Rs.length+Ts.length,1<<4|0],Rs,Ts],t=[[255,196,0,3+Cs.length+Bs.length,0<<4|1],Cs,Bs],n=[[255,196,0,3+Ms.length+Ls.length,1<<4|1],Ms,Ls];return Buffer.concat([...r.map(Buffer.from),...e.map(Buffer.from),...t.map(Buffer.from),...n.map(Buffer.from)])}function ks(){return Buffer.from([255,218,0,12,3,0,0,1,17,2,17,0,63,0])}function Os(r){return Buffer.from([255,221,0,4,r>>8,r&255])}c();c();function br(r,e,t){return r>t?t:r<e?e:r}var Ac=[16,11,12,14,12,10,16,14,13,14,18,17,16,19,24,40,26,24,22,22,24,49,35,37,29,40,58,51,61,60,57,51,56,55,64,72,92,78,64,68,87,69,55,56,80,109,81,87,95,98,103,104,103,62,77,113,121,112,100,120,92,101,103,99],Fc=[17,18,18,24,21,24,47,26,26,47,99,66,56,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99];function Us(r){let e=br(r,1,99),t=Buffer.alloc(128),n=r<50?Math.floor(5e3/e):200-e*2;for(let i=0;i<64;i++){let o=Math.floor((Ac[i]*n+50)/100),s=Math.floor((Fc[i]*n+50)/100);t.writeUInt8(br(o,1,255),i),t.writeUInt8(br(s,1,255),i+64)}return t}function Gn(r=0,e=0){let t=Is(),n=Ps(),i=ks();return function(s){let a,u=[];for(let b of s){let v=re(b),j=v.readUInt8(0),F=v.readUInt8(1)<<16|v.readUInt8(2)<<8|v.readUInt8(3),W=v.readUInt8(4),K=v.readUInt8(5),Ke=v.readUInt8(6)*8||r,ke=v.readUInt8(7)*8||e;v=v.slice(8);let Oe=0;if(W>=64&&W<=127&&(Oe=v.readUInt16BE(0),v=v.slice(4)),K>=128&&F===0){let fi=v.readUInt8(1),Ut=v.readUInt16BE(2),ma=v.slice(4,4+Ut);a={typeSpecific:j,type:W,width:Ke,height:ke,DRI:Oe,precision:fi,qTable:ma},v=v.slice(4+Ut)}else if(K<128&&F===0){let Ut=Us(K);a={typeSpecific:j,type:W,width:Ke,height:ke,DRI:Oe,precision:0,qTable:Ut}}u.push(v)}if(a===void 0)throw new Error("no quantization header present");let{precision:f,qTable:l,type:d,width:h,height:m}=a,x=As(f,l),y=a.DRI===0?Buffer.alloc(0):Os(a.DRI),_=Fs(h,m,d);return{size:{width:h,height:m},data:Buffer.concat([t,x,y,_,n,i,...u])}}}var Ds=C(H());var mt=class extends R{constructor(){let e,t=[],n,i=new Ds.Transform({objectMode:!0,transform:function(o,s,a){if(o.type===5){let u=o.sdp.media.find(f=>f.type==="video"&&f.rtpmap!==void 0&&f.rtpmap.encodingName==="JPEG");if(u!==void 0&&u.rtpmap!==void 0){e=Number(u.rtpmap.payloadType);let f=u.framesize;if(f!==void 0){let[l,d]=f;n=Gn(l,d)}else n=Gn()}a(void 0,o)}else if(o.type===2&&U(o.data)===e){if(t.push(o.data),pe(o.data)&&t.length>0){let u=n(t);this.push({timestamp:q(o.data),ntpTimestamp:o.ntpTimestamp,payloadType:U(o.data),data:u.data,framesize:u.size,type:10}),t=[]}a()}else a(void 0,o)}});super(i)}};c();var Vn=C(he());var Ns=C(H());var Pc=225e6,xr=class extends R{constructor(t=Pc){let n=new Ns.Transform({objectMode:!0,transform:(i,o,s)=>{this._active&&i.type===8&&i.tracks!==void 0&&(this._capture=!0),this._capture&&i.type===8&&(this._bufferOffset<this._buffer.byteLength-i.data.byteLength?(i.data.copy(this._buffer,this._bufferOffset),this._bufferOffset+=i.data.byteLength):this.stop()),s(void 0,i)}});n.on("finish",()=>{this.stop()});super(n);this._buffer=Buffer.allocUnsafe(0),this._bufferSize=t,this._bufferOffset=0,this._active=!1,this._capture=!1,this._captureCallback=()=>{}}start(t){this._active||((0,Vn.default)("msl:capture:start")(t),this._captureCallback=t,this._buffer=Buffer.allocUnsafe(this._bufferSize),this._bufferOffset=0,this._active=!0)}stop(){if(this._active){(0,Vn.default)("msl:capture:stop")(`captured bytes: ${this._bufferOffset}`);try{this._captureCallback(this._buffer.slice(0,this._bufferOffset))}catch(t){console.error(t)}this._buffer=Buffer.allocUnsafe(0),this._bufferOffset=0,this._active=!1,this._capture=!1}}};c();var Qn=C(he());c();var zn=Math.pow(2,32),G=class{constructor(e){this.byteLength=e}},ie=class extends G{constructor(t=0){super(t);this.copy=(t,n)=>{t.fill(0,n,n+this.byteLength)}}load(){}},Me=class extends G{constructor(t){super(t.length);this.copy=(t,n)=>{for(let i=0;i<this.byteLength;i+=1)t[n+i]=this.value.charCodeAt(i)};this.load=(t,n)=>{this.value=t.slice(n,n+this.byteLength).toString("ascii")};this.value=t}},O=class extends G{constructor(t=0){super(1);this.copy=(t,n)=>{t.writeUInt8(this.value,n)};this.load=(t,n)=>{this.value=t.readUInt8(n)};this.value=t}},kt=class extends G{constructor(t){super(t.length);this.copy=(t,n)=>{for(let i=0;i<this.value.length;++i)t.writeUInt8(this.value[i],n+i)};this.load=(t,n)=>{for(let i=0;i<this.value.length;++i)this.value[i]=t.readUInt8(n+i)};this.value=t}},L=class extends G{constructor(t=0){super(2);this.copy=(t,n)=>{t.writeUInt16BE(this.value,n)};this.load=(t,n)=>{this.value=t.readUInt16BE(n)};this.value=t}},Yn=class extends G{constructor(t=0){super(3);this.copy=(t,n)=>{t.writeUInt8(this.value>>16&255,n),t.writeUInt8(this.value>>8&255,n+1),t.writeUInt8(this.value&255,n+2)};this.load=(t,n)=>{this.value=t.readUInt8(n)<<16+t.readUInt8(n+1)<<8+t.readUInt8(n+2)};this.value=t}},Kn=class extends G{constructor(t){super(t.length*2);this.copy=(t,n)=>{for(let i=0;i<this.value.length;++i)t.writeUInt16BE(this.value[i],n+2*i)};this.load=(t,n)=>{for(let i=0;i<this.value.length;++i)this.value[i]=t.readUInt16BE(n+2*i)};this.value=t}},g=class extends G{constructor(t=0){super(4);this.copy=(t,n)=>{t.writeUInt32BE(this.value,n)};this.load=(t,n)=>{this.value=t.readUInt32BE(n)};this.value=t}},gt=class extends G{constructor(t){super(t.length*4);this.copy=(t,n)=>{for(let i=0;i<this.value.length;++i)t.writeUInt32BE(this.value[i],n+4*i)};this.load=(t,n)=>{for(let i=0;i<this.value.length;++i)this.value[i]=t.readUInt32BE(n+4*i)};this.value=t}},Xn=class extends G{constructor(t=0){super(8);this.copy=(t,n)=>{let i=this.value/zn|0,o=this.value-i*zn;t.writeUInt32BE(i,n),t.writeUInt32BE(o,n+4)};this.load=(t,n)=>{let i=t.readUInt32BE(n),o=t.readUInt32BE(n+4);this.value=i*zn+o};this.value=t}},Hs=function(r=0){return class extends G{constructor(n){super(0);this.copy=(n,i)=>{let o=0;for(let s of this.value)s.copy(n,i+o),o+=s.byteLength};this.load=()=>{};this.value=n.reduce((i,o)=>i.concat(new L(o.length),new kt(o)),[new O(r|n.length)]),this.byteLength=this.value.reduce((i,o)=>i+o.byteLength,0)}}},qs={ftyp:{container:"file",mandatory:!0,quantity:"one",box:"Box",is_container:!0,body:[["major_brand",Me,"isom"],["minor_version",g,0],["compatible_brands",Me,"mp41"]]},moov:{container:"file",mandatory:!0,quantity:"one",box:"Box",is_container:!0},mdat:{container:"file",mandatory:!1,quantity:"any",box:"Box",is_container:!1,body:[]},mvhd:{container:"moov",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["creation_time",g,0],["modification_time",g,0],["timescale",g,1e3],["duration",g,4294967295],["rate",g,65536],["volume",L,256],["reserved",ie,10],["matrix",gt,[65536,0,0,0,65536,0,0,0,1073741824]],["pre_defined",ie,24],["next_track_ID",g,4294967295]]},trak:{container:"moov",mandatory:!0,quantity:"one+",box:"Box",is_container:!0},tkhd:{container:"trak",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,config:{flags:3},body:[["creation_time",g,0],["modification_time",g,0],["track_ID",g,1],["reserved",ie,4],["duration",g,0],["reserved2",ie,8],["layer",L,0],["alternate_group",L,0],["volume",L,256],["reserved3",ie,2],["matrix",gt,[65536,0,0,0,65536,0,0,0,1073741824]],["width",g,0],["height",g,0]]},tref:{container:"trak",mandatory:!1,quantity:"one-",box:"Box",is_container:!1},mdia:{container:"trak",mandatory:!1,quantity:"one",box:"Box",is_container:!0},mdhd:{container:"mdia",mandatory:!1,quantity:"one",box:"FullBox",is_container:!1,body:[["creation_time",g,0],["modification_time",g,0],["timescale",g,1e3],["duration",g,4294967295],["language",L,0],["pre_defined",L,0]]},hdlr:{container:"mdia",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["predefined",g,0],["handler_type",Me,"vide"],["reserved",ie,12],["name",Me,"VideoHandler\0"]]},minf:{container:"mdia",mandatory:!0,quantity:"one",box:"Box",is_container:!0},vmhd:{container:"minf",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,config:{flags:1},body:[["graphicsmode",L,0],["opcolor",Kn,[0,0,0]]]},smhd:{container:"minf",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["balance",L,0],["reserved",L]]},dinf:{container:"minf",mandatory:!0,quantity:"one",box:"Box",is_container:!0},dref:{container:"dinf",mandatory:!0,quantity:"one",box:"FullBox",is_container:!0,body:[["entry_count",g,0]]},"url ":{container:"dref",mandatory:!0,quantity:"one+",box:"FullBox",is_container:!1,config:{flags:1},body:[]},stbl:{container:"minf",mandatory:!0,quantity:"one",box:"Box",is_container:!0},stts:{container:"stbl",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["entry_count",g,0]]},stsd:{container:"stbl",mandatory:!0,quantity:"one",box:"FullBox",is_container:!0,body:[["entry_count",g,1]]},avc1:{container:"stsd",mandatory:!1,quantity:"one",box:"Box",is_container:!0,body:[["reserved",ie,6],["data_reference_index",L,1],["pre_defined",L,0],["reserved2",ie,2],["pre_defined2",gt,[0,0,0]],["width",L,1920],["height",L,1080],["horizresolution",g,4718592],["vertresolution",g,4718592],["reserved3",g,0],["frame_count",L,1],["compressorname",kt,Buffer.alloc(32)],["depth",L,24],["pre_defined3",L,65535]]},avcC:{container:"avc1",mandatory:!1,quantity:"one",box:"Box",is_container:!1,body:[["configurationVersion",O,1],["AVCProfileIndication",O,77],["profile_compatibility",O,0],["AVCLevelIndication",O,41],["lengthSizeMinusOne",O,255],["sequenceParameterSets",Hs(224),[]],["pictureParameterSets",Hs(),[]]]},mp4a:{container:"stsd",mandatory:!1,quantity:"one",box:"Box",is_container:!0,body:[["reserved",ie,6],["data_reference_index",L,1],["reserved2",gt,[0,0]],["channelcount",L,2],["samplesize",L,16],["pre_defined",L,0],["reserved3",L,0],["samplerate",g,0]]},esds:{container:"mp4a",mandatory:!1,quantity:"one",box:"FullBox",is_container:!1,body:[["ES_DescrTag",O,3],["ES_DescrLength",O,25],["ES_ID",L,1],["flagsAndStreamPriority",O,0],["DecoderConfigDescrTag",O,4],["DecoderConfigDescrLength",O,17],["objectProfileIndication",O,64],["streamTypeUpstreamReserved",O,21],["bufferSizeDB",kt,[0,0,0]],["maxBitRate",g,0],["avgBitRate",g,0],["DecSpecificInfoShortTag",O,5],["DecSpecificInfoShortLength",O,2],["audioConfigBytes",L,0],["SLConfigDescrTag",O,6],["SLConfigDescrLength",O,1],["SLConfigDescrPredefined",O,2]]},stsz:{container:"stbl",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["sample_size",g,0],["sample_count",g,0]]},stsc:{container:"stbl",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["entry_count",g,0]]},stco:{container:"stbl",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["entry_count",g,0]]},stss:{container:"stbl",mandatory:!1,quantity:"one-",box:"FullBox",is_container:!1,body:[["entry_count",g,0]]},edts:{container:"trak",mandatory:!1,quantity:"one-",box:"Box",is_container:!0},elst:{container:"edts",mandatory:!1,quantity:"one-",box:"FullBox",is_container:!1,body:[["entry_count",g,1],["segment_duration",g,0],["media_time",g,4294967295],["media_rate_integer",L,1],["media_rate_fraction",L,0]]},mvex:{container:"moov",mandatory:!1,quantity:"one-",box:"Box",is_container:!0},mehd:{container:"mvex",mandatory:!1,quantity:"one-",box:"FullBox",is_container:!1,body:[["fragment_duration",g,0]]},trex:{container:"mvex",mandatory:!0,quantity:"one+",box:"FullBox",is_container:!1,body:[["track_ID",g,1],["default_sample_description_index",g,1],["default_sample_duration",g,0],["default_sample_size",g,0],["default_sample_flags",g,0]]},moof:{container:"file",mandatory:!1,quantity:"zero+",box:"Box",is_container:!1},mfhd:{container:"moof",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["sequence_number",g,0]]},traf:{container:"moof",mandatory:!1,quantity:"zero+",box:"Box",is_container:!0},tfhd:{container:"traf",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,config:{flags:32},body:[["track_ID",g,1],["default_sample_flags",g,0]]},tfdt:{container:"traf",mandatory:!1,quantity:"one-",box:"FullBox",is_container:!1,config:{version:1},body:[["baseMediaDecodeTime",Xn,0]]},trun:{container:"traf",mandatory:!1,quantity:"zero+",box:"FullBox",is_container:!1,config:{flags:773},body:[["sample_count",g,1],["data_offset",g,0],["first_sample_flags",g,0],["sample_duration",g,0],["sample_size",g,0]]},"....":{box:"Box",is_container:!1,body:[]},file:{box:"None",is_container:!0,mandatory:!0,quantity:"one"}},Jn=class{static None(){return[]}static Box(e){return[["size",g,0],["type",Me,e]]}static FullBox(e){return[].concat(this.Box(e),[["version",O,0],["flags",Yn,0]])}},T=class extends G{constructor(t,n){super(0);this.type=t;let i=qs[this.type];if(i===void 0)throw new Error(`unknown box type: ${t}`);this.config=Object.assign({},i.config,n);let o=Jn[i.box](this.type),s=i.body||[];this.struct=new Map;let a=0;for(let[u,f,l]of[].concat(o,s)){if(this.has(u))throw new Error("Trying to add existing key");let d=l;this.config[u]&&(d=this.config[u]);let h=new f(d);this.struct.set(u,{offset:a,element:h}),a+=h.byteLength}this.byteLength=a}element(t){let n=this.struct.get(t);if(n===void 0)throw new Error("invalid key");return n.element}set(t,n){this.element(t).value=n}get(t){return this.element(t).value}offset(t){let n=this.struct.get(t);if(n===void 0)throw new Error("invalid key");return n.offset}has(t){return this.struct.has(t)}add(t,n){if(this.has(t))throw new Error("Trying to add existing key");return this.struct.set(t,{offset:this.byteLength,element:n}),this.byteLength+=n.byteLength,this}buffer(){let t=Buffer.allocUnsafe(this.byteLength);return this.copy(t),t}copy(t,n=0){this.set("size",this.byteLength);for(let i of this.struct.values())i.element.copy(t,n+i.offset)}load(t,n=0){for(let i of this.struct.values())i.element.load!==void 0&&i.element.load(t,n+i.offset)}format(t=0){let n=[" ".repeat(t)+`[${this.type}] (${this.byteLength})`];for(let[i,o]of this.struct){let s=o.element;s.format!==void 0?n.push(s.format(t+2)):n.push(" ".repeat(t+2)+`${i} = ${s.value} (${s.byteLength})`)}return n.join(`
`)}print(t){console.warn(this.format(t))}},D=class extends T{constructor(t,n,...i){super(t,n);this.boxSize=0,this.append(...i)}append(...t){for(let n of t)this.add(`box_${this.boxSize++}`,n);return this}parse(t){let n=[];for(;t.byteLength>0;){let i=new Me("....");i.load(t,4);let o=i.value,s=qs[o],a;if(s!==void 0){if(s.is_container){a=new D(o),a.load(t);let u=a.parse(t.slice(a.byteLength,a.get("size")));n.push(...u)}else if(a=new T(o),a.load(t),o==="avcC"){let u=a.element("AVCProfileIndication").value.toString(16).padStart(2,0),f=a.element("profile_compatibility").value.toString(16).padStart(2,0),l=a.element("AVCLevelIndication").value.toString(16).padStart(2,0);n.push({type:"video",mime:`avc1.${u}${f}${l}`})}else if(o==="esds"){let f=a.element("audioConfigBytes").value>>>11&31;n.push({type:"audio",mime:`mp4a.40.${f}`})}}else a=new T("...."),a.load(t),a.type=a.get("type");this.append(a),t=t.slice(a.get("size"))}return n}};c();c();var kc={1:"AAC Main",2:"AAC LC"},Oc={0:"96 kHz",1:"88.2 kHz",2:"64 kHz",3:"48 kHz",4:"44.1 kHz",5:"32 kHz",6:"24 kHz",7:"22.05 kHz",8:"16 kHz",9:"12 kHz",10:"11.025 kHz",11:"8 kHz",12:"7.35 kHz"},Uc={1:"Mono",2:"Stereo"},Dc=r=>{let e=r>>>11&31,t=r>>>7&15,n=r>>>3&15,i=kc[e]||`AAC (${e})`,o=Oc[t]||"unknown",s=Uc[n]||n.toString();return{coding:i,samplingRate:o,channels:s}},js=(r,e,t)=>{let n=Number(r.fmtp.parameters.bitrate)||32e4,i=parseInt(r.fmtp.parameters.config,16),o=i>>>11&31;return{tkhd:{track_ID:t,creation_time:e,modification_time:e,width:0,height:0,volume:1},mdhd:{timescale:Number(r.rtpmap.clockrate),creation_time:e,modification_time:e,duration:0},hdlr:{handler_type:"soun",name:"SoundHandler\0"},mediaHeaderBox:new T("smhd"),sampleEntryBox:new D("mp4a",{samplerate:r.rtpmap.clockrate<<16>>>0},new T("esds",{audioConfigBytes:i,maxBitRate:n,avgBitRate:n})),defaultFrameDuration:1024,mime:`mp4a.40.${o}`,codec:Dc(i)}};c();c();function Nc(r){return r>64&&r<91?r-65:r>96&&r<123?r-71:r>47&&r<58?r+4:r===43?62:r===47?63:0}function Ws(r,e){let t=r.replace(/[^A-Za-z0-9+/]/g,""),n=t.length,i=e?Math.ceil((n*3+1>>2)/e)*e:n*3+1>>2,o=new Uint8Array(i),s,a,u=0,f=0;for(let l=0;l<n;l++)if(a=l&3,u|=Nc(t.charCodeAt(l))<<18-6*a,a===3||n-l===1){for(s=0;s<3&&f<i;s++,f++)o[f]=u>>>(16>>>s&24)&255;u=0}return o}c();c();var _r=class{constructor(e){this._buffer=e,this._dataView=new DataView(this._buffer),this._offset=0,this._bitpos=0,this._byte=0}readUint8(e){return this._dataView.getUint8(e)}readUint16(e){return this._dataView.getUint16(e)}readUint32(e){return this._dataView.getUint32(e)}readNext(){let e=this.readUint8(this._offset);return this._offset+=1,e}readBits(e){if(e>32||e===0)throw new Error("length has to be between 0 - 31 bits");let t=0;for(let n=1;n<=e;++n)this._bitpos===0&&(this._byte=this.readNext()),t=t<<1|this._byte>>8-++this._bitpos&1,this._bitpos%=8;return t}readUnsignedExpGolomb(){let e=0;for(;this.readBits(1)!==1;)e++;if(e===0)return 0;if(e>=31)throw new Error("read unsigned exponential Golomb: internal error");let t=this.readBits(e);return t|=1<<e,t-1}readSignedExpGolomb(){let e=this.readUnsignedExpGolomb();return e&1?e=e+1>>1:e=-(e>>1),e}size(){return this._buffer.byteLength}getUint8Array(){return new Uint8Array(this._buffer)}getArrayBuffer(){return this._buffer}};var wr=class{constructor(e){this.reader=new _r(e)}parse(){this.reader.readNext();let e=this.reader.readNext();this.reader.readNext();let t=this.reader.readNext();if(this.reader.readUnsignedExpGolomb(),[100,110,122,244,44,83,86,118].includes(e)){let x=this.reader.readUnsignedExpGolomb();if(x===3&&this.reader.readBits(1),this.reader.readUnsignedExpGolomb(),this.reader.readUnsignedExpGolomb(),this.reader.readBits(1),this.reader.readBits(1))for(let _=0;_<(x!==3?8:12);_++)this.reader.readBits(1)}this.reader.readUnsignedExpGolomb();let n=this.reader.readUnsignedExpGolomb();if(n===0)this.reader.readUnsignedExpGolomb();else if(n===1){let x=0;this.reader.readBits(1),this.reader.readSignedExpGolomb(),this.reader.readSignedExpGolomb(),x=this.reader.readUnsignedExpGolomb();for(let y=0;y<x;y++)this.reader.readSignedExpGolomb()}this.reader.readUnsignedExpGolomb(),this.reader.readBits(1);let i=this.reader.readUnsignedExpGolomb(),o=this.reader.readUnsignedExpGolomb(),s=this.reader.readBits(1);this.reader.readBits(1);let a=this.reader.readBits(1),u=a?this.reader.readUnsignedExpGolomb():0,f=a?this.reader.readUnsignedExpGolomb():0,l=a?this.reader.readUnsignedExpGolomb():0,d=a?this.reader.readUnsignedExpGolomb():0,h=(i+1)*16-u*2-f*2,m=(2-s)*(o+1)*16-l*2-d*2;return{profile:e,level:t/10,width:h,height:m}}};var Hc={66:"Baseline",77:"Main",100:"High"},qc=r=>{let e=parseInt(r.substr(0,2),16),t=parseInt(r.substr(4,2),16),n=Hc[e]||e.toString(),i=(t/10).toFixed(1);return{coding:"H.264",profile:n,level:i}},$s=(r,e,t)=>{let n=r.fmtp.parameters["profile-level-id"],i=r.fmtp.parameters["sprop-parameter-sets"].split(",").map(Ws),o=i.slice(0,1),s=i.slice(1),a=new wr(o[0].buffer).parse(),u=3600;return{mediaHeaderBox:new T("vmhd"),sampleEntryBox:new D("avc1",{width:a.width,height:a.height},new T("avcC",{AVCProfileIndication:o[0][1],profile_compatibility:o[0][2],AVCLevelIndication:o[0][3],sequenceParameterSets:o,pictureParameterSets:s})),tkhd:{track_ID:t,creation_time:e,modification_time:e,width:a.width<<16,height:a.height<<16,volume:0},hdlr:{},mdhd:{timescale:r.rtpmap.clockrate,creation_time:e,modification_time:e,duration:0},defaultFrameDuration:r.framerate!==void 0&&r.framerate>0&&Number(r.rtpmap.clockrate)/Number(r.framerate)||u,mime:`avc1.${n}`,codec:qc(n)}};var Gs={"MPEG4-GENERIC":js,H264:$s},jc=()=>({lastTimestamp:0,baseMediaDecodeTime:0,defaultFrameDuration:0,clockrate:0,bitrate:0,framerate:0,cumulativeByteLength:0,cumulativeDuration:0,cumulativeFrames:0}),Wc=(r,{byteLength:e,duration:t})=>{if(r.cumulativeByteLength+=e,r.cumulativeDuration+=t,r.cumulativeFrames++,r.cumulativeDuration>=r.clockrate){let n=8*r.cumulativeByteLength,i=r.cumulativeFrames,o=r.cumulativeDuration/r.clockrate;r.bitrate=n/o,r.framerate=i/o,r.cumulativeByteLength=0,r.cumulativeDuration=0,r.cumulativeFrames=0}},vr=class{constructor(){this.trackIdMap={},this.sequenceNumber=0,this.ntpPresentationTime=0,this.trackData=[]}trak(e){let t=new D("trak"),n=new D("mdia"),i=new D("minf"),o=new D("dinf"),s=new D("dref"),a=new D("stbl");return s.set("entry_count",1),t.append(new T("tkhd",e.tkhd),n.append(new T("mdhd",e.mdhd),new T("hdlr",e.hdlr),i.append(e.mediaHeaderBox,o.append(s.append(new T("url "))),a.append(new D("stsd",void 0,e.sampleEntryBox),new T("stts"),new T("stsc"),new T("stco"),new T("stsz"),new T("stss"))))),t}moov(e,t){let n=new D("moov");n.append(new T("mvhd",{creation_time:t,modification_time:t,duration:0}));let i=new D("mvex");this.trackIdMap={},this.sequenceNumber=0,this.ntpPresentationTime=0;let o=0;return this.trackData=[],e.media.forEach(s=>{if(s.rtpmap===void 0)return;let a=s.rtpmap.payloadType,u=s.rtpmap.encodingName;if(Gs[u]!==void 0){this.trackIdMap[a]=++o,s.type.toLowerCase()==="video"&&(this.videoTrackId=o);let f=Gs[u](s,t,o);s.mime=f.mime,s.codec=f.codec;let l=jc();l.clockrate=s.rtpmap.clockrate,l.defaultFrameDuration=f.defaultFrameDuration,this.trackData.push(l);let d=this.trak(f);n.append(d),i.append(new T("trex",{track_ID:o}))}}),n.append(i),n}moof(e){let{trackId:t,timestamp:n,byteLength:i}=e,o=t-1,s=this.trackData[o],a=s.lastTimestamp!==0?n-s.lastTimestamp|0:s.defaultFrameDuration;s.lastTimestamp=n;let u=new D("moof"),f=new D("traf"),l=new T("trun",{sample_duration:a,sample_size:i,first_sample_flags:64});return u.append(new T("mfhd",{sequence_number:this.sequenceNumber++}),f.append(new T("tfhd",{track_ID:t}),new T("tfdt",{baseMediaDecodeTime:s.baseMediaDecodeTime}),l)),s.baseMediaDecodeTime+=a,l.set("data_offset",u.byteLength+8),Wc(s,{byteLength:i,duration:a}),u}mdat(e){let t=new T("mdat");return t.add("data",e),t}setPresentationTime(e,t){if(!this.ntpPresentationTime&&t&&e===this.videoTrackId){let n=e-1,i=this.trackData[n];this.ntpPresentationTime=t-1e3*(i.baseMediaDecodeTime/i.clockrate)}}};var Vs=C(H());var yt=class extends R{constructor(){let t=new vr,n=o=>{this.onSync&&this.onSync(o)},i=new Vs.Transform({objectMode:!0,transform:function(o,s,a){if(o.type===5){let u=Math.floor(new Date().getTime()/1e3+2082852e3),f=new T("ftyp"),l=t.moov(o.sdp,u),d=Buffer.allocUnsafe(f.byteLength+l.byteLength);f.copy(d,0),l.copy(d,f.byteLength),(0,Qn.default)("msl:mp4:isom")(`ftyp: ${f.format()}`),(0,Qn.default)("msl:mp4:isom")(`moov: ${l.format()}`);let h=o.sdp.media.map(m=>({type:m.type,encoding:m.rtpmap&&m.rtpmap.encodingName,mime:m.mime,codec:m.codec}));this.push({type:8,data:d,tracks:h,ftyp:f,moov:l})}else if(o.type===6||o.type===7){let{payloadType:u,timestamp:f,ntpTimestamp:l}=o,d=t.trackIdMap[u];if(d){t.ntpPresentationTime||(t.setPresentationTime(d,l),t.ntpPresentationTime&&n(t.ntpPresentationTime));let h,m=o.type===7?o.nalType===5:void 0;t.ntpPresentationTime&&m&&o.ntpTimestamp!==void 0&&(h=(o.ntpTimestamp-t.ntpPresentationTime)/1e3);let x=o.data.byteLength,y=t.moof({trackId:d,timestamp:f,byteLength:x}),_=t.mdat(o.data),b=Buffer.allocUnsafe(y.byteLength+_.byteLength);y.copy(b,0),_.copy(b,y.byteLength),this.push({type:8,data:b,moof:y,mdat:_,ntpTimestamp:l,checkpointTime:h})}}else this.push(o);a()}});super(i);this.boxBuilder=t}get bitrate(){return this.boxBuilder.trackData&&this.boxBuilder.trackData.map(t=>t.bitrate)}get framerate(){return this.boxBuilder.trackData&&this.boxBuilder.trackData.map(t=>t.framerate)}get ntpPresentationTime(){return this.boxBuilder.ntpPresentationTime}};c();var Zs=C(he());var Tr=C(H());c();var Zn=(o=>(o[o.SR=200]="SR",o[o.RR=201]="RR",o[o.SDES=202]="SDES",o[o.BYE=203]="BYE",o[o.APP=204]="APP",o))(Zn||{}),$c=r=>({version:r[0]>>>6,padding:!!(r[0]&ut[2]),count:r[0]&31,packetType:r.readUInt8(1),length:r.readUInt16BE(2)}),ei=r=>{let e=$c(r);switch(e.packetType){case 200:return Gc(r,e);case 201:return Vc(r,e);case 202:return zc(r,e);case 203:return Yc(r,e);case 204:return Kc(r,e);default:return e}},Er=(r,e)=>({type:3,data:e,channel:r,rtcp:ei(e)}),zs={packetType:200},Ys=(r,e,t)=>{let n=[];for(let i=0;i<r;i++){let o=t+i*24;n.push({syncSource:e.readUInt32BE(o+0),fractionLost:e.readUInt8(o+4),cumulativeNumberOfPacketsLost:e.readUIntBE(o+5,3),extendedHighestSequenceNumberReceived:e.readUInt32BE(o+8),interarrivalJitter:e.readUInt32BE(o+12),lastSRTimestamp:e.readUInt32BE(o+16),delaySinceLastSR:e.readUInt32BE(o+20)})}return n},Gc=(r,e)=>we(X({},e),{syncSource:r.readUInt32BE(4),ntpMost:r.readUInt32BE(8),ntpLeast:r.readUInt32BE(12),rtpTimestamp:r.readUInt32BE(16),sendersPacketCount:r.readUInt32BE(20),sendersOctetCount:r.readUInt32BE(24),reports:Ys(e.count,r,28)}),Sr=r=>r.packetType===200,Vc=(r,e)=>we(X({},e),{syncSource:r.readUInt32BE(4),reports:Ys(e.count,r,8)}),Ks=r=>r.packetType===201,ti=(u=>(u[u.CNAME=1]="CNAME",u[u.NAME=2]="NAME",u[u.EMAIL=3]="EMAIL",u[u.PHONE=4]="PHONE",u[u.LOC=5]="LOC",u[u.TOOL=6]="TOOL",u[u.NOTE=7]="NOTE",u[u.PRIV=8]="PRIV",u))(ti||{}),zc=(r,e)=>{let t=[],n=4;for(let i=0;i<e.count;i++){let o={source:r.readUInt32BE(n),items:[]};for(n+=4;;){let s=r.readUInt8(n++);if(s===0){n%4!==0&&(n+=4-n%4);break}let a=r.readUInt8(n++);if(s===8){let u=r.readUInt8(n),f=r.toString("utf8",n+1,n+1+u),l=r.toString("utf8",n+1+u,n+a);o.items.push([8,f,l])}else{let u=r.toString("utf8",n,n+a);o.items.push([s,u])}n+=a}t.push(o)}return we(X({},e),{syncSource:r.readUInt32BE(4),sourceDescriptions:t})},Xs=r=>r.packetType===202,Yc=(r,e)=>{let t=[];for(let i=0;i<e.count;i++)t.push(r.readUInt32BE(4+4*i));let n;if(e.length>e.count){let i=4+4*e.count,o=r.readUInt8(i);n=r.toString("utf-8",i+1,i+1+o)}return we(X({},e),{sources:t,reason:n})},Rr=r=>r.packetType===203,Kc=(r,e)=>we(X({},e),{subtype:e.count,source:r.readUInt32BE(4),name:r.toString("ascii",8,12),data:r.slice(12)}),Js=r=>r.packetType===204;var Xc=100,Qs=(0,Zs.default)("msl:mse"),Le=class extends te{constructor(t){if(t===void 0)throw new Error("video element argument missing");let n,i,o=new Tr.Writable({objectMode:!0,write:(a,u,f)=>{var l,d;if(a.type===8)if(this._done=f,a.tracks!==void 0||a.mime!==void 0){let h=(l=a.tracks)!=null?l:[],m=h.map(b=>b.mime).filter(b=>b),x=m.length!==0?m.join(", "):"avc1.640029, mp4a.40.2",y=(d=a.mime)!=null?d:`video/mp4; codecs="${x}"`;if(!MediaSource.isTypeSupported(y)){o.emit("error",`unsupported media type: ${y}`);return}this._lastCheckpointTime=0,n=new MediaSource,t.src=window.URL.createObjectURL(n);let _=()=>{if(n===void 0){o.emit("error","no MediaSource instance");return}window.URL.revokeObjectURL(t.src),n.removeEventListener("sourceopen",_),this.onSourceOpen&&this.onSourceOpen(n,h),i=this.addSourceBuffer(t,n,y),i.onerror=b=>{console.error("error on SourceBuffer: ",b),o.emit("error")};try{i.appendBuffer(a.data)}catch(b){Qs("failed to append to SourceBuffer: ",b,a)}};n.addEventListener("sourceopen",_)}else{this._lastCheckpointTime=a.checkpointTime!==void 0?a.checkpointTime:this._lastCheckpointTime;try{i==null||i.appendBuffer(a.data)}catch(h){Qs("failed to append to SourceBuffer: ",h,a)}}else a.type===3&&Rr(a.rtcp)&&(n==null?void 0:n.readyState)==="open"&&n.endOfStream(),f()}});o.on("finish",()=>{console.warn("incoming stream finished: end stream"),n&&n.readyState==="open"&&n.endOfStream()}),o.on("error",a=>{console.error("error on incoming stream: ",a),i&&i.updating?i.addEventListener("updateend",()=>{(n==null?void 0:n.readyState)==="open"&&n.endOfStream()}):(n==null?void 0:n.readyState)==="open"&&n.endOfStream()});let s=new Tr.Readable({objectMode:!0,read:function(){}});s.on("error",()=>{console.warn("outgoing stream broke somewhere")});super(o,s);this._videoEl=t,this._lastCheckpointTime=0}addSourceBuffer(t,n,i){let o=n.addSourceBuffer(i),s=0,a=()=>{if(++s,s>Xc&&o.buffered.length){s=0;let u=o.buffered.length-1,f=o.buffered.start(u),l=Math.min(t.currentTime,this._lastCheckpointTime)-10;try{if(l>f){o.remove(f,l);return}}catch(d){console.warn(d)}}this._done&&this._done()};return o.addEventListener("updateend",a),o}get currentTime(){return this._videoEl.currentTime}play(){return J(this,null,function*(){return yield this._videoEl.play()})}pause(){return this._videoEl.pause()}};c();var ea=C(H());var Ie=class extends R{constructor(){let e,t=[],n=new ea.Transform({objectMode:!0,transform:function(i,o,s){if(i.type===5){let a;for(let u of i.sdp.media)u.type==="application"&&u.rtpmap&&u.rtpmap.encodingName==="VND.ONVIF.METADATA"&&(a=u);a&&a.rtpmap&&(e=Number(a.rtpmap.payloadType)),s(void 0,i)}else if(i.type===2&&U(i.data)===e){if(t.push(re(i.data)),pe(i.data)&&t.length>0){let a={timestamp:q(i.data),ntpTimestamp:i.ntpTimestamp,payloadType:U(i.data),data:Buffer.concat(t),type:9};s(void 0,a),t=[];return}s()}else s(void 0,i)}});super(n)}};c();var ni=C(H());c();var ta=C(he()),Jc="RTSP/1.0",ra=r=>{if(!r.method||!r.uri)throw new Error("message needs to contain a method and a uri");let e=r.protocol||Jc,t=r.headers||{},n=[`${r.method} ${r.uri} ${e}`,Object.entries(t).map(([i,o])=>i+": "+o).join(`\r
`),`\r
`].join(`\r
`);return(0,ta.default)("msl:rtsp:outgoing")(n),Buffer.from(n)};c();c();var Qc=(r,e,t=0)=>{let n=`
${e}`;t=r.indexOf(n,t);let i=0,o=[];for(;t>=0;)i=r.indexOf(`
`,t+n.length),o.push(r.toString("ascii",t+n.length,i).trim()),t=r.indexOf(n,i);return o},Zc=r=>r.match(/^m=/),Cr=(r,e)=>{let t=e.indexOf(r);return t<0?[e.slice(0)]:[e.slice(0,t),e.slice(t+1)]},na={fmtp:r=>{let[e,t]=Cr(" ",r);switch(e){default:let n=t.trim().split(";"),i={};return n.forEach(o=>{let[s,a]=Cr("=",o),u=s.trim().toLowerCase();u!==""&&(i[u]=a.trim())}),{format:e,parameters:i}}},framerate:Number,rtpmap:r=>{let[e,t]=Cr(" ",r),[n,i,o]=t.toUpperCase().split("/");return o===void 0?{payloadType:Number(e),encodingName:n,clockrate:Number(i)}:{payloadType:Number(e),encodingName:n,clockrate:Number(i),encodingParameters:o}},transform:r=>r.split(";").map(e=>e.split(",").map(Number)),"x-sensor-transform":r=>r.split(";").map(e=>e.split(",").map(Number)),framesize:r=>r.split(" ")[1].split("-").map(Number)},el=r=>{let[e,t]=Cr(":",r);return t===void 0?{[e]:!0}:na[e]!==void 0?{[e]:na[e](t)}:{[e]:t}},tl=r=>{let e=r.slice(0,1),t=r.slice(2);switch(e){case"v":return{version:t};case"o":let[n,i,o,s,a,u]=t.split(" ");return{origin:{addrType:a,netType:s,sessionId:i,sessionVersion:o,unicastAddress:u,username:n}};case"s":return{sessionName:t};case"i":return{sessionInformation:t};case"u":return{uri:t};case"e":return{email:t};case"p":return{phone:t};case"c":let[f,l,d]=t.split(" ");return{connectionData:{addrType:l,connectionAddress:d,netType:f}};case"b":let[h,m]=t.split(":");return{bwtype:h,bandwidth:m};case"t":let[x,y]=t.split(" ").map(Number);return{time:{startTime:x,stopTime:y}};case"r":let[_,b,...v]=t.split(" ").map(Number);return{repeatTimes:{repeatInterval:_,activeDuration:b,offsets:v}};case"z":return;case"k":return;case"a":return el(t);case"m":let[j,F,W,K]=t.split(" ");return{type:j,port:Number(F),protocol:W,fmt:Number(K)};default:}},ia=r=>{let e=r.indexOf(`
m=`);return Qc(r,"a=control:",e)},ri=r=>{let e=r.toString("ascii").split(`
`).map(o=>o.trim()),t={session:{},media:[]},n=0,i=t.session;for(let o of e)Zc(o)&&(t.media[n]={},i=t.media[n],++n),i=Object.assign(i,tl(o));return t},Br=r=>({type:5,data:r,sdp:ri(r)});c();var oe=(r,e)=>{let t=`
${e.toLowerCase()}: `,n=r.toString().toLowerCase().indexOf(t);if(n>=0){let i=r.indexOf(`
`,n+t.length);return r.toString("ascii",n+t.length,i).trim()}return null},Mr=r=>{let e=oe(r,"CSeq");return e!==null?Number(e):null},Lr=r=>{let e=oe(r,"Session");return e?e.split(";")[0]:null},Ir=r=>{let e=oe(r,"Session");if(e===null)return null;let t=60,n="timeout=",i=e.toLowerCase().indexOf(n);if(i!==-1){let o=e.substring(i+n.length);o=o.split(";")[0];let s=parseInt(o);return isNaN(s)?t:s}return t},bt=r=>Number(r.toString("ascii",9,12)),Ar=r=>oe(r,"Content-Base"),Fr=r=>oe(r,"Content-Location"),Pr=r=>{let e=oe(r,"Connection");return e!==null&&e.toLowerCase()==="close"},kr=r=>{let e=oe(r,"Range");if(e!==null)return e.split("=")[1].split("-")},Or=r=>{let e=[`

`,"\r\r",`\r
\r
`].map(t=>{let n=r.indexOf(t);return n!==-1?n+t.length:n}).filter(t=>t!==-1);return e.length>0?e.reduce((t,n)=>Math.min(t,n)):-1};var sa=4,oa=36,rl=r=>{let e=Buffer.alloc(sa),t=0,n=0;for(;n<e.length;){let u=r[t++],f=Math.min(u.length,e.length-n);u.copy(e,n,0,f),n+=f}let i=e[1],o=e.length,s=e.readUInt16BE(2),a=o+s;return{channel:i,begin:o,end:a}},Ur=class{constructor(){this._chunks=[];this._length=0;this._state=0;this._init()}_init(){this._chunks=[],this._length=0,this._state=0}_push(e){this._chunks.push(e),this._length+=e.length}_parseRtsp(){let e=[],t=Buffer.concat(this._chunks),n=Or(t);if(n===-1)return e;let i=n,o=oe(t,"Content-Length");if(o&&parseInt(o)>t.length-i)return e;if(this._init(),i===t.length||t[i]===oa){let s=t.slice(0,i);e.push({type:4,data:s});let a=t.slice(i);this._push(a)}else{let s=t,a=t.slice(i);e.push({type:4,data:s}),e.push(Br(a))}return e}_parseInterleaved(){let e=[];if(this._length<sa||(this._packet||(this._packet=rl(this._chunks)),this._length<this._packet.end))return e;let t=Buffer.concat(this._chunks),n=t.slice(this._packet.begin,this._packet.end),i=t.slice(this._packet.end),o=this._packet.channel;if(delete this._packet,this._init(),this._push(i),o%2===0)e.push({type:2,data:n,channel:o});else{let s=n;do{let a=s.readUInt16BE(2)*4+4;e.push(Er(o,s.slice(0,a))),s=s.slice(a)}while(s.length>0)}return e}_setState(){for(;this._chunks.length>0&&this._chunks[0].length===0;)this._chunks.shift();let e=this._chunks[0];if(this._chunks.length===0)this._state=0;else if(e[0]===oa)this._state=1;else if(e.toString("ascii",0,4)==="RTSP")this._state=2;else throw new Error(`Unknown chunk of length ${e.length}`)}parse(e){this._push(e),this._state===0&&this._setState();let t=[],n=!1;for(;!n;){let i=[];switch(this._state){case 0:break;case 1:i=this._parseInterleaved();break;case 2:i=this._parseRtsp();break;default:throw new Error("internal error: unknown state")}i.length>0?t=t.concat(i):n=!0,this._setState()}return t}};var xt=class extends R{constructor(){let e=new Ur,t=new ni.Transform({objectMode:!0,transform:function(i,o,s){if(i.type===1)try{e.parse(i.data).forEach(a=>t.push(a)),s()}catch(a){s(a)}else s(void 0,i)}}),n=new ni.Transform({objectMode:!0,transform:function(i,o,s){if(i.type===4){let a=ra(i);s(void 0,{type:1,data:a})}else s(void 0,i)}});super(t,n)}};c();var Nr=C(he());c();var _t=(r,e)=>{let t;if(e!==void 0){if(typeof e!="object")throw new Error("merge expects override to be an object!");t=Object.keys(e).reduce((n,i)=>(e[i]!==void 0&&(n[i]=e[i]),n),{})}return Object.assign({},r,t)};var aa=C(H());c();var nl=Date.UTC(1900,0,1);function Dr(r,e){let t=(r+e/4294967296)*1e3;return nl+t}function il(r){return/^[^:]+:\/\//.test(r)}var Hr=(s=>(s.OPTIONS="OPTIONS",s.DESCRIBE="DESCRIBE",s.SETUP="SETUP",s.PLAY="PLAY",s.PAUSE="PAUSE",s.TEARDOWN="TEARDOWN",s))(Hr||{}),ol=5,sl=(r=typeof window=="undefined"?"":window.location.hostname,e=[])=>({uri:e.length>0?`rtsp://${r}/axis-media/media.amp?${e.join("&")}`:`rtsp://${r}/axis-media/media.amp`}),Ot=class extends Error{constructor(t,n){super(t);this.name="RTSPResponseError",this.code=n}},wt=class extends R{constructor(t={}){let{uri:n,headers:i,defaultHeaders:o}=_t(sl(t.hostname,t.parameters),t),s=new aa.Transform({objectMode:!0,transform:(a,u,f)=>{a.type===4?(this._onRtsp(a),f()):a.type===3?(this._onRtcp(a),this.onRtcp&&this.onRtcp(a.rtcp),f(void 0,a)):a.type===2?(this._onRtp(a),f(void 0,a)):(a.type===5&&(this._onSdp(a),this.onSdp&&this.onSdp(a.sdp)),f(void 0,a))}});s.on("end",()=>{this._outgoingClosed=!0});super(s);this._outgoingClosed=!1,this._reset(),this.update(n,i,o),this._sessionControlURL=this._controlURL()}update(t,n={},i={}){if(t===void 0)throw new Error("You must supply an uri when creating a RtspSessionComponent");this.uri=t,this.defaultHeaders=i,this.headers=Object.assign({["OPTIONS"]:{},["PLAY"]:{},["SETUP"]:{Blocksize:"64000"},["DESCRIBE"]:{Accept:"application/sdp"},["PAUSE"]:{}},n)}_reset(){this._sequence=1,this.retry=()=>console.error("No request sent, can't retry"),this._callStack=[],this._callHistory=[],this._state="idle",this._waiting=!1,this._contentBase=null,this._sessionId=null,this._renewSessionInterval!==null&&clearInterval(this._renewSessionInterval),this._renewSessionInterval=null,this.t0=void 0,this.n0=void 0,this.clockrates=void 0}_controlURL(t){var i,o;if(t!==void 0&&il(t))return t;let n=(o=(i=this._contentBase)!=null?i:this._contentLocation)!=null?o:this.uri;if(n==null)throw new Error("relative or missing control attribute but no base URL available");return t===void 0||t==="*"?n:new URL(t,n).href}_onRtsp(t){this._waiting=!1;let n=bt(t.data),i=Pr(t.data),o=Mr(t.data);if(o===null)throw new Error("rtsp: expected sequence number");if(this._callHistory===void 0)throw new Error("rtsp: internal error");let s=this._callHistory[o-1];if((0,Nr.default)("msl:rtsp:incoming")(`${t.data}`),!this._sessionId&&!i){this._sessionId=Lr(t.data);let a=Ir(t.data);a!==null&&(this._renewSessionInterval!==null&&clearInterval(this._renewSessionInterval),this._renewSessionInterval=setInterval(()=>{this._enqueue({method:"OPTIONS"}),this._dequeue()},Math.max(ol,a-5)*1e3))}this._contentBase||(this._contentBase=Ar(t.data)),this._contentLocation||(this._contentLocation=Fr(t.data)),n>=400&&this.onError&&this.onError(new Ot(t.data.toString("ascii"),n)),s==="PLAY"&&this.onPlay&&this.onPlay(kr(t.data)),i&&((0,Nr.default)("msl:rtsp:incoming")(`RTSP Session ${this._sessionId} ended with statusCode: ${n}`),this._sessionId=null),this._dequeue()}_onRtcp(t){if(this.t0===void 0||this.n0===void 0)throw new Error("rtsp: internal error");if(Sr(t.rtcp)){let n=t.channel-1;this.t0[n]=t.rtcp.rtpTimestamp,this.n0[n]=Dr(t.rtcp.ntpMost,t.rtcp.ntpLeast)}}_onRtp(t){if(this.t0===void 0||this.n0===void 0||this.clockrates===void 0)throw new Error("rtsp: internal error");let n=t.channel,i=this.t0[n],o=this.n0[n];if(typeof i!="undefined"&&typeof o!="undefined"){let s=this.clockrates[n],u=q(t.data)-i|0;t.ntpTimestamp=u/s*1e3+o}}_onSdp(t){this.n0={},this.t0={},this.clockrates={},this._sessionControlURL=this._controlURL(t.sdp.session.control),t.sdp.media.forEach((n,i)=>{if(n.rtpmap===void 0)return;let{clockrate:o}=n.rtpmap,s=i*2,a=s+1,u=n.control===void 0?this._sessionControlURL:this._controlURL(n.control);this._enqueue({method:"SETUP",headers:{Transport:"RTP/AVP/TCP;unicast;interleaved="+s+"-"+a},uri:u}),this.clockrates!==void 0&&(this.clockrates[s]=o)}),this._state==="playing"&&this._enqueue({method:"PLAY",headers:{Range:`npt=${this.startTime||0}-`},uri:this._sessionControlURL}),this._dequeue()}play(t=0){if(this._state==="idle")this.startTime=Number(t)||0,this._enqueue({method:"OPTIONS"}),this._enqueue({method:"DESCRIBE"});else if(this._state==="paused"){if(this._sessionId===null||this._sessionId===void 0)throw new Error("rtsp: internal error");this._enqueue({method:"PLAY",headers:{Session:this._sessionId},uri:this._sessionControlURL})}this._state="playing",this._dequeue()}pause(){this._enqueue({method:"PAUSE"}),this._state="paused",this._dequeue()}stop(){this._sessionId?this._enqueue({method:"TEARDOWN"}):this._callStack=[],this._state="idle",this._renewSessionInterval!==null&&(clearInterval(this._renewSessionInterval),this._renewSessionInterval=null),this._dequeue()}send(t){let{method:n,headers:i,uri:o}=t;if(n===void 0)throw new Error("missing method when send request");if(this._waiting=!0,this.retry=this.send.bind(this,t),this._sequence===void 0||this.headers===void 0||this._callHistory===void 0)throw new Error("rtsp: internal error");let s=Object.assign({type:4,uri:o||this._sessionControlURL,data:Buffer.alloc(0)},{method:n,headers:i},{headers:Object.assign({CSeq:this._sequence++},this.defaultHeaders,this.headers[n],i)});this._sessionId&&(s.headers.Session=this._sessionId),this._callHistory.push(n),this._outgoingClosed?(0,Nr.default)("msl:rtsp:outgoing")(`Unable to send ${n}, connection closed`):this.outgoing.push(s)}_enqueue(t){if(this._callStack===void 0)throw new Error("rtsp: internal error");this._callStack.push(t)}_dequeue(){if(this._callStack===void 0)throw new Error("rtsp: internal error");if(!this._waiting&&this._callStack.length>0){let t=this._callStack.shift();t!==void 0&&this.send(t)}}};c();var qr=C(he());var jr=C(H());c();var al=10007,ul=(r=window.location.host,e=window.location.protocol)=>({uri:`${e==="https:"?"wss:":"ws:"}//${r}/rtsp-over-websocket`,tokenUri:`${e}//${r}/axis-cgi/rtspwssession.cgi`,protocol:"binary",timeout:al}),ua=(...e)=>J(void 0,[...e],function*(r={}){let{uri:t,tokenUri:n,protocol:i,timeout:o}=_t(ul(r.host,r.scheme),r);if(t===void 0)throw new Error("ws: internal error");return yield new Promise((s,a)=>{try{let u=new WebSocket(t,i),f=setTimeout(()=>{clearTimeout(f),u.readyState===WebSocket.CONNECTING&&(u.onerror=null,a(new Error("websocket connection timed out")))},o);u.binaryType="arraybuffer",u.onerror=l=>{clearTimeout(f);function d(){if(this.status>=400){console.warn("failed to load token",this.status,this.responseText),a(l);return}let m=this.responseText.trim(),x=`${t}?rtspwssession=${m}`,y=new WebSocket(x,i);y.binaryType="arraybuffer",y.onerror=_=>{a(_)},y.onopen=()=>s(y)}let h=new XMLHttpRequest;h.addEventListener("load",d),h.addEventListener("error",m=>{console.warn("failed to get token"),a(m)}),h.addEventListener("abort",()=>a(l)),h.open("GET",`${n}?${Date.now()}`);try{h.send()}catch(m){a(l)}},u.onopen=()=>{clearTimeout(f),s(u)}}catch(u){a(u)}})});var fl=1001,V=class extends z{constructor(t){if(t===void 0)throw new Error("socket argument missing");let n=new jr.Readable({objectMode:!0,read:function(){}});t.onmessage=o=>{let s=Buffer.from(o.data);n.push({data:s,type:1})||t.readyState===WebSocket.OPEN&&((0,qr.default)("msl:websocket:incoming")("downstream frozen"),t.close())},n.on("error",o=>{console.warn("closing socket due to incoming error",o),t.close()});let i=new jr.Writable({objectMode:!0,write:function(o,s,a){try{t.send(o.data)}catch(u){console.warn("message lost during send:",o)}a()}});i.on("error",o=>{console.warn("error during websocket send, ignoring:",o)}),i.on("finish",()=>{(0,qr.default)("msl:websocket:outgoing")("finish"),t.readyState!==WebSocket.CLOSED&&t.close()}),t.onclose=o=>{(0,qr.default)("msl:websocket:close")(`${o.code}`),o.code===fl&&this.onServerClose&&this.onServerClose(),n.push(null),i.end()};super(n,i)}static open(t){return J(this,null,function*(){return yield ua(t).then(n=>new V(n))})}};var ai={};Dt(ai,{Html5CanvasPipeline:()=>$r,Html5VideoMetadataPipeline:()=>Gr,Html5VideoPipeline:()=>St,HttpMsePipeline:()=>Kr,MetadataPipeline:()=>Vr,Pipeline:()=>Ae,RtspMjpegPipeline:()=>Et,RtspMp4Pipeline:()=>vt,RtspPipeline:()=>ne,WsSdpPipeline:()=>zr});c();c();var Ae=class{constructor(...e){let[t,...n]=e;this._set=new Set(e),this.firstComponent=t,this.lastComponent=n.reduce((i,o)=>i.connect(o),t)}init(...e){let[t,...n]=e;this._set=new Set(e),this.firstComponent=t,this.lastComponent=n.reduce((i,o)=>i.connect(o),t)}insertAfter(e,t){if(!this._set.has(e))throw new Error("insertion point not part of pipeline");if(this._set.has(t))throw new Error("new component already in the pipeline");let n=e.next;return n===null?(e.connect(t),this.lastComponent=t):(e.disconnect(),e.connect(t).connect(n)),this._set.add(t),this}insertBefore(e,t){if(!this._set.has(e))throw new Error("insertion point not part of pipeline");if(this._set.has(t))throw new Error("new component already in the pipeline");let n=e.prev;return n===null?(t.connect(e),this.firstComponent=t):(n.disconnect(),n.connect(t).connect(e)),this._set.add(t),this}remove(e){if(!this._set.has(e))throw new Error("component not part of pipeline");let t=e.prev,n=e.next;if(t===null&&n===null)throw new Error("cannot remove last component");return t===null&&n!==null?(e.disconnect(),this.firstComponent=n):t!==null&&n===null?(t.disconnect(),this.lastComponent=t):t!==null&&n!==null&&(t.disconnect(),e.disconnect(),t.connect(n)),this._set.delete(e),this}append(...e){return e.forEach(t=>{this.insertAfter(this.lastComponent,t)}),this}prepend(...e){return e.forEach(t=>{this.insertBefore(this.firstComponent,t)}),this}};c();var ne=class extends Ae{constructor(t){let n=new xt,i=new wt(t);i.onSdp=o=>{this.onSdp&&this.onSdp(o)},i.onPlay=o=>{this.onPlay&&this.onPlay(o)};super(n,i);this.rtsp=i}};c();var vt=class extends ne{constructor(t){super(t);let n=new ht,i=new ft,o=new yt;o.onSync=s=>{this.onSync&&this.onSync(s)},this.append(n,i,o),this._mp4Muxer=o}get bitrate(){return this._mp4Muxer.bitrate}get framerate(){return this._mp4Muxer.framerate}};c();var Et=class extends ne{constructor(e){super(e);let t=new mt;this.append(t)}};c();c();c();var Fe=C(ca()),Wr=class{constructor(e,t,n){this.nc=()=>(++this.count,this.count.toString(16).padStart(8,"0"));this.cnonce=()=>new Array(4).fill(0).map(()=>Math.floor(Math.random()*256)).map(e=>e.toString(16)).join("");this.ha1=e=>{let t=this.ha1Base;return this.algorithm==="md5-sess"&&(t=new Fe.Md5().appendStr(`${t}:${this.nonce}:${e}`).end().toString()),t};this.ha2=(e,t,n="")=>{let i=new Fe.Md5().appendStr(`${e}:${t}`).end().toString();if(this.algorithm==="md5-sess"){let o=new Fe.Md5().appendStr(n).end().toString();i=new Fe.Md5().appendStr(`${e}:${t}:${o}`).end().toString()}return i};this.authorization=(e="GET",t="",n)=>{let i=this.nc(),o=this.cnonce(),s=this.ha1(o),a=this.ha2(e,t,n),u=this.qop===void 0?new Fe.Md5().appendStr(`${s}:${this.nonce}:${a}`).end().toString():new Fe.Md5().appendStr(`${s}:${this.nonce}:${i}:${o}:${this.qop}:${a}`).end().toString(),f=[];return f.push(`username="${this.username}"`),f.push(`realm="${this.realm}"`),f.push(`nonce="${this.nonce}"`),f.push(`uri="${t}"`),this.qop!==void 0&&(f.push(`qop=${this.qop}`),f.push(`nc=${i}`),f.push(`cnonce="${o}"`)),f.push(`response="${u}"`),this.opaque!==void 0&&f.push(`opaque="${this.opaque}"`),`Digest ${f.join(", ")}`};let i=e.get("realm");if(i===void 0)throw new Error("no realm in digest challenge");this.realm=i,this.ha1Base=new Fe.Md5().appendStr(`${t}:${i}:${n}`).end().toString();let o=e.get("nonce");if(o===void 0)throw new Error("no nonce in digest challenge");this.nonce=o,this.opaque=e.get("opaque");let s=e.get("algorithm");s!==void 0?s==="md5"?this.algorithm="md5":s==="md5-sess"&&(this.algorithm="md5-sess"):this.algorithm="md5";let a=e.get("qop");if(a!==void 0){let u=a.split(",").map(f=>f.trim());u.some(f=>f==="auth")?this.qop="auth":u.some(f=>f==="auth-int")&&(this.qop="auth-int")}this.count=0,this.username=t}};c();var la=r=>{let[,e,...t]=r.split(" "),n=[],i=/\s*([^=]+)="([^"]*)",?/gm,o;do if(o=i.exec(t.join(" ")),o!==null){let[,a,u]=o;n.push([a,u])}while(o!==null);let s=new Map(n);return{type:e.toLowerCase(),params:s}};var cl=401,ll={username:"root",password:"pass"},Pe=class extends R{constructor(e={}){let{username:t,password:n}=_t(ll,e);if(t===void 0||n===void 0)throw new Error("need username and password");let i,o,s=_e(function(u,f,l){u.type===4&&(i=u,o&&u.headers&&(u.headers.Authorization=o)),l(void 0,u)}),a=_e(function(u,f,l){if(u.type===4&&bt(u.data)===cl){let h=u.data.toString().split(`
`).find(x=>/WWW-Auth/i.test(x));if(h===void 0)throw new Error("cannot find WWW-Authenticate header");let m=la(h);if(m.type==="basic")o="Basic "+Buffer.from(t+":"+n).toString("base64");else if(m.type==="digest")o=new Wr(m.params,t,n).authorization(i.method,i.uri);else return;s.write(i,()=>l())}else l(void 0,u)});super(a,s)}};var $r=class extends Et{constructor(t){let{ws:n,rtsp:i,mediaElement:o,auth:s}=t;super(i);if(s){let f=new Pe(s);this.insertBefore(this.rtsp,f)}let a=new ct(o);a.onCanplay=()=>{a.play(),this.onCanplay&&this.onCanplay()},a.onSync=f=>{this.onSync&&this.onSync(f)},this.append(a),this._sink=a;let u=V.open(n);this.ready=u.then(f=>{f.onServerClose=()=>{this.onServerClose&&this.onServerClose()},this.prepend(f),this._src=f})}close(){this._src&&this._src.outgoing.end()}get currentTime(){return this._sink.currentTime}play(){return this._sink.play()}pause(){return this._sink.pause()}get bitrate(){return this._sink.bitrate}get framerate(){return this._sink.framerate}};c();var St=class extends vt{constructor(t){let{ws:n,rtsp:i,mediaElement:o,auth:s}=t;super(i);if(s){let f=new Pe(s);this.insertBefore(this.rtsp,f)}let a=new Le(o);a.onSourceOpen=(f,l)=>{this.tracks=l,this.onSourceOpen&&this.onSourceOpen(f,l)},this.append(a),this._sink=a;let u=V.open(n);this.ready=u.then(f=>{f.onServerClose=()=>{this.onServerClose&&this.onServerClose()},this.prepend(f),this._src=f})}close(){this._src&&this._src.outgoing.end()}get currentTime(){return this._sink.currentTime}play(){return J(this,null,function*(){return yield this._sink.play()})}pause(){return this._sink.pause()}};c();var Gr=class extends St{constructor(e){let{metadataHandler:t}=e;super(e);let n=new Ie;this.insertAfter(this.rtsp,n);let i=R.fromHandlers(o=>{o.type===9&&t(o)},void 0);this.insertAfter(n,i)}};c();var dl={parameters:["audio=0","video=0","event=on","ptz=all"]},Vr=class extends ne{constructor(t){let{ws:n,rtsp:i,metadataHandler:o}=t;super(Object.assign({},dl,i));let s=new Ie;this.append(s);let a=te.fromHandler(f=>{f.type===9&&o(f)});this.append(a);let u=V.open(n);this.ready=u.then(f=>{f.onServerClose=()=>{this.onServerClose&&this.onServerClose()},this.prepend(f),this._src=f})}close(){this._src&&this._src.outgoing.end()}};c();var zr=class extends ne{constructor(t){let{ws:n,rtsp:i,auth:o}=t;super(i);if(o){let a=new Pe(o);this.insertBefore(this.rtsp,a)}let s=V.open(n);this.ready=s.then(a=>{a.onServerClose=()=>{this.onServerClose&&this.onServerClose()},this.prepend(a),this._src=a})}close(){this._src&&this._src.outgoing.end()}get sdp(){return this.ready.then(()=>J(this,null,function*(){let t=new Promise(n=>{this.rtsp.onSdp=n});return this.rtsp.send({method:"DESCRIBE"}),this.rtsp.send({method:"TEARDOWN"}),yield t}))}};c();c();var da=C(he());var pa=C(H());var si=(0,da.default)("msl:http-mp4"),Yr=class extends z{constructor(t){let{uri:n,options:i}=t,o=new pa.Readable({objectMode:!0,read:function(){}});o.on("error",s=>{console.warn("closing socket due to incoming error",s),this._reader&&this._reader.cancel()});super(o);o._read=()=>{this._pull()},this.uri=n,this.options=i,this._allDone=!1}play(){if(this.uri===void 0)throw new Error("cannot start playing when there is no URI");this._abortController=new AbortController,this.length=0,fetch(this.uri,X({credentials:"include",signal:this._abortController.signal},this.options)).then(t=>{if(t.body===null)throw new Error("empty response body");let n=t.headers.get("Content-Type");this.incoming.push({data:Buffer.alloc(0),type:8,mime:n}),this.onHeaders&&this.onHeaders(t.headers),this._reader=t.body.getReader(),this._pull()}).catch(t=>{console.error("http-source: fetch failed: ",t)})}abort(){this._reader&&this._reader.cancel().catch(t=>{console.log("http-source: cancel reader failed: ",t)}),this._abortController&&this._abortController.abort()}_isClosed(){return this._allDone}_close(){var t;this._reader=void 0,this._allDone=!0,this.incoming.push(null),(t=this.onServerClose)==null||t.call(this)}_pull(){this._reader!==void 0&&this._reader.read().then(({done:t,value:n})=>{if(t){this._isClosed()||(si("fetch completed, total downloaded: ",this.length," bytes"),this._close());return}if(n===void 0)throw new Error("expected value to be defined");if(this.length===void 0)throw new Error("expected length to be defined");this.length+=n.length;let i=Buffer.from(n);this.incoming.push({data:i,type:8})?this._pull():si("downstream back pressure: pausing read")}).catch(t=>{si("http-source: read failed: ",t),this._isClosed()||this._close()})}};var Kr=class extends Ae{constructor(t){let{http:n,mediaElement:i}=t,o=new Yr(n),s=new Le(i);o.onHeaders=a=>{this.onHeaders&&this.onHeaders(a)},o.onServerClose=()=>{var a;return(a=this.onServerClose)==null?void 0:a.call(this)};super(o,s);this._src=o,this._sink=s,this.http=o}close(){this._src&&this._src.abort()}get currentTime(){return this._sink.currentTime}play(){return J(this,null,function*(){return yield this._sink.play()})}pause(){return this._sink.pause()}};var ui={};Dt(ui,{RTCPPacketType:()=>Zn,SDESItem:()=>ti,SR:()=>zs,Scheduler:()=>ze,addRTSPRetry:()=>ha,bodyOffset:()=>Or,cSrc:()=>cs,cSrcCount:()=>Be,connectionEnded:()=>Pr,contentBase:()=>Ar,contentLocation:()=>Fr,extHeader:()=>ls,extHeaderLength:()=>Pt,extension:()=>fr,extractHeaderValue:()=>oe,extractURIs:()=>ia,getTime:()=>Dr,isRtcpApp:()=>Js,isRtcpBye:()=>Rr,isRtcpRR:()=>Ks,isRtcpSDES:()=>Xs,isRtcpSR:()=>Sr,marker:()=>pe,messageFromBuffer:()=>Br,padding:()=>as,parse:()=>ri,parseRtcp:()=>ei,payload:()=>re,payloadType:()=>U,range:()=>kr,rtcpMessageFromBuffer:()=>Er,sSrc:()=>fs,sequence:()=>Mr,sequenceNumber:()=>us,sessionId:()=>Lr,sessionTimeout:()=>Ir,statusCode:()=>bt,timestamp:()=>q,version:()=>ss});c();c();c();var ha=(r,{maxRetries:e,errors:t}={maxRetries:20,errors:[503]})=>{let n=0,i=r.onError;r.onError=o=>{if(i==null||i(o),!!t.includes(o.code)){if((n+=1)>e){console.log("retry, too many",n,e);return}setTimeout(()=>{var s;return(s=r.retry)==null?void 0:s.call(r)},n*100)}}};return Sa(pl);})();
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
//# sourceMappingURL=media-stream-library.min.js.map
